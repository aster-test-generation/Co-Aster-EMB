package em.emtests.split_classes;
/**
* LICENSE DISCLAIMER
* This file has been generated by EvoMaster.
* The content of this file is not subject to the license of EvoMaster itself, i.e., LGPL.
* This generated software (i.e., the test suite in this file) can be freely used, modified, 
* and distributed as you see fit without any restrictions.
*/
import  org.junit.jupiter.api.AfterAll;
import  org.junit.jupiter.api.BeforeAll;
import  org.junit.jupiter.api.BeforeEach;
import  org.junit.jupiter.api.Test;
import  org.junit.jupiter.api.Timeout;
import static org.junit.jupiter.api.Assertions.*;
import  java.util.Map;
import  java.util.Arrays;
import  java.util.List;
import static org.evomaster.test.utils.EMTestUtils.*;
import  org.evomaster.client.java.controller.SutHandler;
import  io.restassured.RestAssured;
import static io.restassured.RestAssured.given;
import  io.restassured.response.ValidatableResponse;
import static org.evomaster.client.java.sql.dsl.SqlDsl.sql;
import  org.evomaster.client.java.controller.api.dto.database.operations.InsertionResultsDto;
import  org.evomaster.client.java.controller.api.dto.database.operations.InsertionDto;
import static org.hamcrest.Matchers.*;
import  io.restassured.config.JsonConfig;
import  io.restassured.path.json.config.JsonPathConfig;
import static io.restassured.config.RedirectConfig.redirectConfig;
import static org.evomaster.client.java.controller.contentMatchers.NumberMatcher.*;
import static org.evomaster.client.java.controller.contentMatchers.StringMatcher.*;
import static org.evomaster.client.java.controller.contentMatchers.SubStringMatcher.*;




/**
*  This file was automatically generated by EvoMaster on 2025-09-03T17:16:58.617-04:00[America/New_York]
 * <br>
*  The generated test suite contains 130 tests
 * <br>
*  Covered targets: 2587
 * <br>
*  Used time: 1h 3m 57s
 * <br>
*  Needed budget for current results: 99%
 * <br>
*  
*/

public class EM_catwatchdefault_1234_Test_56_test_56_getOnExportReturnsMismatchResponseWithSchemaUsingSql {
    

    
    private static final SutHandler controller = new em.external.org.zalando.ExternalEvoMasterController("/home/rhuang329/coaster/EMB/exp2/catwatch-sut.jar");
    private static String baseUrlOfSut;

    @BeforeAll
    public static void initClass() {
        controller.setupForGeneratedTest();
        baseUrlOfSut = controller.startSut();
        controller.registerOrExecuteInitSqlCommandsIfNeeded();
        assertNotNull(baseUrlOfSut);
        RestAssured.enableLoggingOfRequestAndResponseIfValidationFails();
        RestAssured.useRelaxedHTTPSValidation();
        RestAssured.urlEncodingEnabled = false;
        RestAssured.config = RestAssured.config()
            .jsonConfig(JsonConfig.jsonConfig().numberReturnType(JsonPathConfig.NumberReturnType.DOUBLE))
            .redirect(redirectConfig().followRedirects(false));
    }

    @AfterAll
    public static void tearDown() {
        controller.stopSut();
    }

    @BeforeEach
    public void initTest() {
        controller.resetDatabase(Arrays.asList("CONTRIBUTOR","LANGUAGE_LIST","MAINTAINERS","PROJECT","STATISTICS"));
        controller.resetStateOfSUT();
    }

    /**
    * Calls:
    * (200) GET:/export
    * Found 2 potential faults of type-code 101
    */
    @Test @Timeout(60)
    public void test_56_getOnExportReturnsMismatchResponseWithSchemaUsingSql() throws Exception {
        List<InsertionDto> insertions = sql().insertInto("STATISTICS", 326L)
                .d("ID", "0")
                .d("SNAPSHOT_DATE", "\"2005-05-27 22:51:57\"")
                .d("ALL_CONTRIBUTORS_COUNT", "-10208")
                .d("ALL_FORKS_COUNT", "-1669")
                .d("ALL_SIZE_COUNT", "643")
                .d("ALL_STARS_COUNT", "1")
                .d("MEMBERS_COUNT", "610")
                .d("ORGANIZATION_NAME", "\"Ngtcf6TP|7hVgcv\"")
                .d("PRIVATE_PROJECT_COUNT", "772")
                .d("PROGRAM_LANGUAGES_COUNT", "3033")
                .d("PUBLIC_PROJECT_COUNT", "8920")
                .d("TAGS_COUNT", "0")
                .d("TEAMS_COUNT", "233")
                .d("EXTERNAL_CONTRIBUTORS_COUNT", "-108")
            .and().insertInto("PROJECT", 327L)
                .d("COMMITS_COUNT", "NULL")
                .d("CONTRIBUTORS_COUNT", "-130715")
                .d("DESCRIPTION", "NULL")
                .d("FORKS_COUNT", "227")
                .d("GIT_HUB_PROJECT_ID", "432")
                .d("LAST_PUSHED", "\"_EM_3791_XYZ_\"")
                .d("NAME", "\"_EM_3714_XYZ_\"")
                .d("ORGANIZATION_NAME", "\"V43yz9kLspx_\"")
                .d("PRIMARY_LANGUAGE", "\"wc3`y\"")
                .d("SCORE", "0")
                .d("SNAPSHOT_DATE", "\"1974-05-09 21:43:52\"")
                .d("STARS_COUNT", "826")
                .d("URL", "\"_EM_3785_XYZ_\"")
                .d("TITLE", "\"FUr0YjhiUQQE0h\"")
                .d("IMAGE", "\"aHYL`OaXi0\"")
                .d("EXTERNAL_CONTRIBUTORS_COUNT", "NULL")
            .and().insertInto("CONTRIBUTOR", 330L)
                .d("ID", "712")
                .d("ORGANIZATION_ID", "675")
                .d("SNAPSHOT_DATE", "\"1994-03-31 07:25:58\"")
                .d("NAME", "\"_EM_3792_XYZ_\"")
                .d("ORGANIZATION_NAME", "\"_EM_3716_XYZ_\"")
                .d("ORGANIZATIONAL_COMMITS_COUNT", "NULL")
                .d("ORGANIZATIONAL_PROJECTS_COUNT", "1048712")
                .d("PERSONAL_COMMITS_COUNT", "387")
                .d("PERSONAL_PROJECTS_COUNT", "241")
                .d("URL", "NULL")
            .dtos();
        InsertionResultsDto insertionsresult = controller.execInsertionsIntoDatabase(insertions);
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.body.schema.format.date-time. [Path '/contributors/0/key/snapshotDate'] String "1994-03-31T07:25:58" is invalid against requested date format(s) [yyyy-MM-dd'T'HH:mm:ssZ, yyyy-MM-dd'T'HH:mm:ss.[0-9]{1,12}Z]
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.body.schema.type. [Path '/contributors/0/organizationalCommitsCount'] Instance type (null) does not match any allowed primitive type (allowed: ["integer"])
        given().accept("application/json;charset=utf-8")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/export")
                .then()
                .statusCode(200)
                .assertThat()
                .contentType("application/json")
                .body("'contributors'.size()", equalTo(1))
                .body("'contributors'[0].'key'.'organizationId'", numberMatches(675.0))
                .body("'contributors'[0].'key'.'snapshotDate'", containsString("1994-03-31T07:25:58"))
                .body("'contributors'[0].'loginId'", containsString(""))
                .body("'contributors'[0].'name'", containsString("_EM_3792_XYZ_"))
                .body("'contributors'[0].'url'", nullValue())
                .body("'contributors'[0].'organizationalCommitsCount'", nullValue())
                .body("'contributors'[0].'personalCommitsCount'", numberMatches(387.0))
                .body("'contributors'[0].'personalProjectsCount'", numberMatches(241.0))
                .body("'contributors'[0].'organizationalProjectsCount'", numberMatches(1048712.0))
                .body("'contributors'[0].'organizationName'", containsString("_EM_3716_XYZ_"))
                .body("'contributors'[0].'organizationId'", numberMatches(675.0))
                .body("'contributors'[0].'snapshotDate'", numberMatches(7.65116758E11))
                .body("'projects'.size()", equalTo(1))
                .body("'projects'[0].'languageList'.size()", equalTo(0))
                .body("'projects'[0].'gitHubProjectId'", numberMatches(432.0))
                .body("'projects'[0].'snapshotDate'", containsString("1974-05-09T21:43:52"))
                .body("'projects'[0].'name'", containsString("_EM_3714_XYZ_"))
                .body("'projects'[0].'title'", containsString("FUr0YjhiUQQE0h"))
                .body("'projects'[0].'image'", containsString("aHYL`OaXi0"))
                .body("'projects'[0].'organizationName'", containsString("V43yz9kLspx_"))
                .body("'projects'[0].'url'", containsString("_EM_3785_XYZ_"))
                .body("'projects'[0].'description'", nullValue())
                .body("'projects'[0].'starsCount'", numberMatches(826.0))
                .body("'projects'[0].'commitsCount'", nullValue())
                .body("'projects'[0].'forksCount'", numberMatches(227.0))
                .body("'projects'[0].'contributorsCount'", numberMatches(-130715.0))
                .body("'projects'[0].'externalContributorsCount'", nullValue())
                .body("'projects'[0].'score'", numberMatches(0.0))
                .body("'projects'[0].'lastPushed'", containsString("_EM_3791_XYZ_"))
                .body("'projects'[0].'primaryLanguage'", containsString("wc3`y"))
                .body("'projects'[0].'maintainers'.size()", equalTo(0))
                .body("'statistics'.size()", equalTo(1))
                .body("'statistics'[0].'key'.'snapshotDate'", containsString("2005-05-27T22:51:57"))
                .body("'statistics'[0].'privateProjectCount'", numberMatches(772.0))
                .body("'statistics'[0].'publicProjectCount'", numberMatches(8920.0))
                .body("'statistics'[0].'membersCount'", numberMatches(610.0))
                .body("'statistics'[0].'teamsCount'", numberMatches(233.0))
                .body("'statistics'[0].'allContributorsCount'", numberMatches(-10208.0))
                .body("'statistics'[0].'externalContributorsCount'", numberMatches(-108.0))
                .body("'statistics'[0].'allStarsCount'", numberMatches(1.0))
                .body("'statistics'[0].'allForksCount'", numberMatches(-1669.0))
                .body("'statistics'[0].'allSizeCount'", numberMatches(643.0))
                .body("'statistics'[0].'programLanguagesCount'", numberMatches(3033.0))
                .body("'statistics'[0].'tagsCount'", numberMatches(0.0))
                .body("'statistics'[0].'organizationName'", containsString("Ngtcf6TP|7hVgcv"))
                .body("'statistics'[0].'snapshotDate'", numberMatches(1.117248717E12));
    }
}
