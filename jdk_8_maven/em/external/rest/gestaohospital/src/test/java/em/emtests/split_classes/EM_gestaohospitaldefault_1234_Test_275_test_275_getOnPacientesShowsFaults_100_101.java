package em.emtests.split_classes;
/**
* LICENSE DISCLAIMER
* This file has been generated by EvoMaster.
* The content of this file is not subject to the license of EvoMaster itself, i.e., LGPL.
* This generated software (i.e., the test suite in this file) can be freely used, modified, 
* and distributed as you see fit without any restrictions.
*/
import  org.junit.jupiter.api.AfterAll;
import  org.junit.jupiter.api.BeforeAll;
import  org.junit.jupiter.api.BeforeEach;
import  org.junit.jupiter.api.Test;
import  org.junit.jupiter.api.Timeout;
import static org.junit.jupiter.api.Assertions.*;
import  java.util.Map;
import  java.util.Arrays;
import  java.util.List;
import static org.evomaster.test.utils.EMTestUtils.*;
import  org.evomaster.client.java.controller.SutHandler;
import  io.restassured.RestAssured;
import static io.restassured.RestAssured.given;
import  io.restassured.response.ValidatableResponse;
import static org.evomaster.client.java.controller.mongo.dsl.MongoDsl.mongo;
import  org.evomaster.client.java.controller.api.dto.database.operations.MongoInsertionResultsDto;
import  org.evomaster.client.java.controller.api.dto.database.operations.MongoInsertionDto;
import static org.hamcrest.Matchers.*;
import  io.restassured.config.JsonConfig;
import  io.restassured.path.json.config.JsonPathConfig;
import static io.restassured.config.RedirectConfig.redirectConfig;
import static org.evomaster.client.java.controller.contentMatchers.NumberMatcher.*;
import static org.evomaster.client.java.controller.contentMatchers.StringMatcher.*;
import static org.evomaster.client.java.controller.contentMatchers.SubStringMatcher.*;




/**
*  This file was automatically generated by EvoMaster on 2025-09-03T21:43:27.165-04:00[America/New_York]
 * <br>
*  The generated test suite contains 408 tests
 * <br>
*  Covered targets: 2217
 * <br>
*  Used time: 1h 5m 2s
 * <br>
*  Needed budget for current results: 99%
 * <br>
*  
*/

public class EM_gestaohospitaldefault_1234_Test_275_test_275_getOnPacientesShowsFaults_100_101 {
    

    
    private static final SutHandler controller = new em.external.br.com.codenation.hospital.ExternalEvoMasterController("/home/rhuang329/coaster/EMB/exp2/gestaohospital-sut.jar");
    private static String baseUrlOfSut;

    @BeforeAll
    public static void initClass() {
        controller.setupForGeneratedTest();
        baseUrlOfSut = controller.startSut();
        controller.registerOrExecuteInitSqlCommandsIfNeeded();
        assertNotNull(baseUrlOfSut);
        RestAssured.enableLoggingOfRequestAndResponseIfValidationFails();
        RestAssured.useRelaxedHTTPSValidation();
        RestAssured.urlEncodingEnabled = false;
        RestAssured.config = RestAssured.config()
            .jsonConfig(JsonConfig.jsonConfig().numberReturnType(JsonPathConfig.NumberReturnType.DOUBLE))
            .redirect(redirectConfig().followRedirects(false));
    }

    @AfterAll
    public static void tearDown() {
        controller.stopSut();
    }

    @BeforeEach
    public void initTest() {
        controller.resetStateOfSUT();
    }

    /**
    * Calls:
    * 1 - (500) GET:/v1/hospitais/maisProximo
    * 2 - (400) POST:/v1/hospitais/{hospital_id}/pacientes/checkout
    * 3 - (200) GET:/v1/hospitais/{id}/leitos
    * 4 - (404) GET:/v1/hospitais/{hospital_id}
    * 5 - (400) POST:/v1/hospitais/
    * 6 - (400) GET:/v1/hospitais/{hospital_id}/proximidades
    * 7 - (404) GET:/v1/hospitais/{hospital_id}/pacientes
    * Found 5 potential faults. Type-codes: 100, 101
    */
    @Test @Timeout(60)
    public void test_275_getOnPacientesShowsFaults_100_101() throws Exception {
        List<MongoInsertionDto> insertions = mongo().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"KgJCOzUAIGqk2\", \"name\":\"CltA1Rgmy4\", \"address\":\"iO>Y9gpQu4vEWi\", \"beds\":{\"$numberInt\":\"-130890\"}, \"availableBeds\":{\"$numberInt\":\"258\"}, \"location\":{\"id\":\"jqk5NhsHo4Is\", \"name\":\"deyWqE8y\", \"referenceId\":\"vowg\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.3795\"}, {\"$numberDouble\":\"0.3545476\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"eCpQ\", \"name\":\"ue\", \"cpf\":\"_EM_7594_XYZ_\", \"birthDate\":{\"$date\":{\"$numberLong\":\"3909186000000\"}}, \"gender\":\"Enx7x2OqrawC\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1521918000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2393467200000\"}}, \"active\":true, \"location\":{\"id\":\"=\", \"name\":\"Bk\", \"referenceId\":\"pps\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.5947515389001622\"}, {\"$numberDouble\":\"0.28214323896672283\"}], \"type\":\"Point\"}}}, {\"id\":\"SYX6f0_gS1KQN2s\", \"name\":\"aLNo2jHwxL5ni\", \"cpf\":\"nY2e3z\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-2049562800000\"}}, \"gender\":\"_EM_7132_XYZ_\", \"entryDate\":{\"$date\":{\"$numberLong\":\"3978910800000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2332904400000\"}}, \"active\":true, \"location\":{\"id\":\"FSqvVFhl\", \"name\":\"0A62o4UUu\", \"referenceId\":\"ki3kqvCmR8j\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.17958780133581953\"}, {\"$numberDouble\":\"0.6630382327295755\"}], \"type\":\"Point\"}}}, {\"id\":\"U5TXM9u5a4Eq\", \"name\":\"T0Ac3huPQ\", \"cpf\":\"K6pGZAt\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2472523200000\"}}, \"gender\":\"a\", \"entryDate\":{\"$date\":{\"$numberLong\":\"3567301200000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2141528400000\"}}, \"active\":true, \"location\":{\"id\":\"raIgJeIJjPsf\", \"name\":\"J\", \"referenceId\":\"XLpS\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.44788761610872263\"}, {\"$numberDouble\":\"0.13476312558015946\"}], \"type\":\"Point\"}}}, {\"id\":\"TpsZWeHm_10\", \"name\":\"s\", \"cpf\":\"_EM_7133_XYZ_\", \"birthDate\":{\"$date\":{\"$numberLong\":\"896760000000\"}}, \"gender\":\"RwqRq\", \"entryDate\":{\"$date\":{\"$numberLong\":\"3826411200000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"123397200000\"}}, \"active\":false, \"location\":{\"id\":\"CRrtbh8fA01D\", \"name\":\"ZhAtkPN\", \"referenceId\":\"5PMdMr\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"1.0810593553368097\"}, {\"$numberDouble\":\"-0.8455347764540163\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"956\"}, \"machineIdentifier\":{\"$numberInt\":\"168\"}, \"processIdentifier\":{\"$numberInt\":\"100\"}, \"counter\":{\"$numberInt\":\"445\"}}, \"name\":\"n5U6k1\", \"description\":\"hX1Qx6ZTa5bl\", \"quantity\":{\"$numberInt\":\"814\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"828\"}, \"machineIdentifier\":{\"$numberInt\":\"86\"}, \"processIdentifier\":{\"$numberInt\":\"802\"}, \"counter\":{\"$numberInt\":\"923023864\"}}, \"name\":\"qiKrlf\", \"description\":\"iElPN43uPXfcQFLA\", \"quantity\":{\"$numberInt\":\"802884707\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"684\"}, \"machineIdentifier\":{\"$numberInt\":\"317\"}, \"processIdentifier\":{\"$numberInt\":\"820\"}, \"counter\":{\"$numberInt\":\"903\"}}, \"name\":\"jm4ESvF\", \"description\":\"q2sqEkx1V41eu\", \"quantity\":{\"$numberInt\":\"331\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"3dbbce1b70a19f98f531ca42\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"rj2Nv8xt2Zp\", \"name\":\"W1fiQG74N\", \"address\":\"_EM_7590_XYZ_\", \"beds\":{\"$numberInt\":\"-89461\"}, \"availableBeds\":{\"$numberInt\":\"947\"}, \"location\":{\"id\":\"_EM_7134_XYZ_\", \"name\":\"_EM_7595_XYZ_\", \"referenceId\":\"_EM_3T819_XYZ_4\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.4387920784755074\"}, {\"$numberDouble\":\"0.8840991967740897\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"U\", \"name\":\"zVzEjinpn4w7zB\", \"cpf\":\"h4_El\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-482961600000\"}}, \"gender\":\"FXJ\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1367956800000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2271992400000\"}}, \"active\":false, \"location\":{\"id\":\"_EM_7596_XYZ_\", \"name\":\"_EM_7597_XYZ_\", \"referenceId\":\"N0R=Y3D8q3VR\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.23098717498815913\"}, {\"$numberDouble\":\"0.20553193588807483\"}], \"type\":\"Point\"}}}], \"products\":[], \"_id\":{\"$oid\":\"7d9c9b0ec932d8d8c72c867b\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"_EM_4083_XYZ_\", \"name\":\"Ulq6UU\", \"address\":\"_EM_4084_XYZ_\", \"beds\":{\"$numberInt\":\"485\"}, \"availableBeds\":{\"$numberInt\":\"0\"}, \"location\":{\"id\":\"pwvO\", \"name\":\"YM9FKLxCarcBH\", \"referenceId\":\"3rHeVYD\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.9430267114809038\"}, {\"$numberDouble\":\"0.0\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"N95Gxtj17vLmG\", \"name\":\"L4DCn8ahG9YzFd\", \"cpf\":\"ztwDZyb6v\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-2083863600000\"}}, \"gender\":\"N8\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1340654400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"3947461200000\"}}, \"active\":false, \"location\":{\"id\":\"NubjuR9ROUy\", \"name\":\"Q3od7vSHrYRPs\", \"referenceId\":\"H\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.47494730297525667\"}, {\"$numberDouble\":\"0.2980395607486127\"}], \"type\":\"Point\"}}}, {\"id\":\"z9CSIOuFq\", \"name\":\"cj2\", \"cpf\":\"_59\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2148440400000\"}}, \"gender\":\"4gkXCVhu2ff7zqdI\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-524520000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"3296606400000\"}}, \"active\":false, \"location\":{\"id\":\"_uPDA_Vz_wEw\", \"name\":\"0kLtEQnsQAt9dfQH\", \"referenceId\":\"3p\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.9180894516214159\"}, {\"$numberDouble\":\"0.05590151584745284\"}], \"type\":\"Point\"}}}, {\"id\":\"RjFSuvQLsj2\", \"name\":\"cJ\u0089xdE\", \"cpf\":\"XHU6Kh\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2257214400000\"}}, \"gender\":\"5bpC_c9GkHynSy\", \"entryDate\":{\"$date\":{\"$numberLong\":\"961128000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"1886558400000\"}}, \"active\":false, \"location\":{\"id\":\"R\", \"name\":\"Li7xyddV\", \"referenceId\":\"_EM_3821_XYZ_\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"-608.3188805773317\"}, {\"$numberDouble\":\"0.0\"}], \"type\":\"Point\"}}}, {\"id\":\"\", \"name\":\"hp\", \"cpf\":\"WfWquYbavkc\", \"birthDate\":{\"$date\":{\"$numberLong\":\"1658376000000\"}}, \"gender\":\"xQLXet3Io\", \"entryDate\":{\"$date\":{\"$numberLong\":\"1471406400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"3494376000000\"}}, \"active\":true, \"location\":{\"id\":\"FjORex\", \"name\":\"7Es\", \"referenceId\":\"fMOBg07\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.23242065082967223\"}, {\"$numberDouble\":\"0.728905171732254\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"872\"}, \"machineIdentifier\":{\"$numberInt\":\"231\"}, \"processIdentifier\":{\"$numberInt\":\"468\"}, \"counter\":{\"$numberInt\":\"177\"}}, \"name\":\"_d3nf4T7HIzqA\", \"description\":\"\", \"quantity\":{\"$numberInt\":\"729\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"991\"}, \"machineIdentifier\":{\"$numberInt\":\"942425397\"}, \"processIdentifier\":{\"$numberInt\":\"48\"}, \"counter\":{\"$numberInt\":\"87\"}}, \"name\":\"r8\", \"description\":\"8P_0D8\", \"quantity\":{\"$numberInt\":\"332\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"684\"}, \"machineIdentifier\":{\"$numberInt\":\"228\"}, \"processIdentifier\":{\"$numberInt\":\"141\"}, \"counter\":{\"$numberInt\":\"89\"}}, \"name\":\"x\", \"description\":\"yVXrxuoAZQl7\", \"quantity\":{\"$numberInt\":\"59\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"95\"}, \"machineIdentifier\":{\"$numberInt\":\"522\"}, \"processIdentifier\":{\"$numberInt\":\"761\"}, \"counter\":{\"$numberInt\":\"854\"}}, \"name\":\"_FU_4085_XYZc\", \"description\":\"B5zNKtY\", \"quantity\":{\"$numberInt\":\"712\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"f6bb632406a1bc6babea8096\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"UMY12Ol6oT\", \"name\":\"_EM_7140_XYZ_\", \"address\":\"\", \"beds\":{\"$numberInt\":\"8388727\"}, \"availableBeds\":{\"$numberInt\":\"-15848\"}, \"location\":{\"id\":\"DRRG_eLS\", \"name\":\"I\", \"referenceId\":\"_EM_7598_XYZ_\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.222454150966\"}, {\"$numberDouble\":\"-0.3350813204760912\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"x2JhuRvn0sKEElg0\", \"name\":\"ye9J9jiOy4\", \"cpf\":\"GYt]\", \"birthDate\":{\"$date\":{\"$numberLong\":\"4095288000000\"}}, \"gender\":\"Y\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1423076400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"1767762000000\"}}, \"active\":true, \"location\":{\"id\":\"_EM_7599_XYZ_\", \"name\":\"05knJ8zduKIbg865\", \"referenceId\":\"Ew\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.7988980674645282\"}, {\"$numberDouble\":\"-1.0136116550817331\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"504\"}, \"machineIdentifier\":{\"$numberInt\":\"31\"}, \"processIdentifier\":{\"$numberInt\":\"-883\"}, \"counter\":{\"$numberInt\":\"959\"}}, \"name\":\"bWkfGl0\", \"description\":\"_EM_7591_XYZ_\", \"quantity\":{\"$numberInt\":\"828\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"871\"}, \"machineIdentifier\":{\"$numberInt\":\"209\"}, \"processIdentifier\":{\"$numberInt\":\"720\"}, \"counter\":{\"$numberInt\":\"383\"}}, \"name\":\"\", \"description\":\"NJyfGlhLMwHa\", \"quantity\":{\"$numberInt\":\"97\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"255\"}, \"machineIdentifier\":{\"$numberInt\":\"-15755\"}, \"processIdentifier\":{\"$numberInt\":\"585\"}, \"counter\":{\"$numberInt\":\"494\"}}, \"name\":\"jy3\", \"description\":\"_EM_7592_XYZ_\", \"quantity\":{\"$numberInt\":\"551\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"571\"}, \"machineIdentifier\":{\"$numberInt\":\"435\"}, \"processIdentifier\":{\"$numberInt\":\"686\"}, \"counter\":{\"$numberInt\":\"584\"}}, \"name\":\"xVp6cz\", \"description\":\"FUzhaWJ\", \"quantity\":{\"$numberInt\":\"634\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"368\"}, \"machineIdentifier\":{\"$numberInt\":\"328\"}, \"processIdentifier\":{\"$numberInt\":\"539\"}, \"counter\":{\"$numberInt\":\"864\"}}, \"name\":\"kK\", \"description\":\"AfOtr1FFcVj\", \"quantity\":{\"$numberInt\":\"810\"}, \"productType\":\"COMMON\"}], \"_id\":{\"$oid\":\"2bbb103547f2b05d0c8cfabf\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"DoYr8XgTZ3F\", \"name\":\"?lh\", \"address\":\"Wd1BZuQ\", \"beds\":{\"$numberInt\":\"107\"}, \"availableBeds\":{\"$numberInt\":\"945\"}, \"location\":{\"id\":\"UAZ9IGOa\", \"name\":\";akj\", \"referenceId\":\"cLpoBde7Umnw\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.3642453979506082\"}, {\"$numberDouble\":\"0.5247306006\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"x\", \"name\":\"ejrDUnA6BfW\", \"cpf\":\"5ljTpqOIt\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-976820400000\"}}, \"gender\":\"SwXfnEy\", \"entryDate\":{\"$date\":{\"$numberLong\":\"888987600000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2644632000000\"}}, \"active\":false, \"location\":{\"id\":\"Bm8r31sKQpI\", \"name\":\"H7zHWYk\", \"referenceId\":\"H3naeHif4hC\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.2570555668043937\"}, {\"$numberDouble\":\"0.10415955543129929\"}], \"type\":\"Point\"}}}, {\"id\":\"Ulu5bh9FqYoyq1\", \"name\":\"Zznp0Hv5\", \"cpf\":\"VDD\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-1238007600000\"}}, \"gender\":\"kaFeVIKWSN6DaZV\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1719255600000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2932434000000\"}}, \"active\":true, \"location\":{\"id\":\"vQ\", \"name\":\"_EM_7141_XYZ_\", \"referenceId\":\"OStkqhfO7ls7CLqc\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.788\"}, {\"$numberDouble\":\"0.9284225870450352\"}], \"type\":\"Point\"}}}, {\"id\":\"dnnGRAz5yU\", \"name\":\"2JyDccw1SFm1Rj\", \"cpf\":\"_EM_7142_XYZ_\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-86036400000\"}}, \"gender\":\"plkYSX9mFwVu\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1996772400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-2145294000000\"}}, \"active\":true, \"location\":{\"id\":\"kUnq\", \"name\":\"\", \"referenceId\":\"eoXm6fKkIzf\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.9180841234415513\"}, {\"$numberDouble\":\"0.8605257849315029\"}], \"type\":\"Point\"}}}, {\"id\":\"7y0HdlQQBzjg3kB0\", \"name\":\"mAtb56iqWJ0LyFd\", \"cpf\":\"xxcDkY1aI4xLj\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-975610800000\"}}, \"gender\":\"\", \"entryDate\":{\"$date\":{\"$numberLong\":\"4066866000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-2083863600000\"}}, \"active\":false, \"location\":{\"id\":\"kyTGP\", \"name\":\"k85PFDqIdBimeol\", \"referenceId\":\"1RP\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.654554385920883\"}, {\"$numberDouble\":\"0.7138669305765155\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"262\"}, \"machineIdentifier\":{\"$numberInt\":\"131\"}, \"processIdentifier\":{\"$numberInt\":\"788\"}, \"counter\":{\"$numberInt\":\"654\"}}, \"name\":\"eK\", \"description\":\"sjI\", \"quantity\":{\"$numberInt\":\"562\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"-523667\"}, \"machineIdentifier\":{\"$numberInt\":\"-447\"}, \"processIdentifier\":{\"$numberInt\":\"-1712\"}, \"counter\":{\"$numberInt\":\"740\"}}, \"name\":\"wfji0hYWH\", \"description\":\"hba\", \"quantity\":{\"$numberInt\":\"1049241\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"534\"}, \"machineIdentifier\":{\"$numberInt\":\"380\"}, \"processIdentifier\":{\"$numberInt\":\"932\"}, \"counter\":{\"$numberInt\":\"60\"}}, \"name\":\"Kant885\", \"description\":\"h9F4mpeFkiojTo6\", \"quantity\":{\"$numberInt\":\"81\"}, \"productType\":\"COMMON\"}], \"_id\":{\"$oid\":\"b24ba7bced4967f6f7fa0d0a\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"_EM_7600_XYZ_\", \"name\":\"7OYrqoto4\", \"address\":\"kzmoji\", \"beds\":{\"$numberInt\":\"343\"}, \"availableBeds\":{\"$numberInt\":\"2105344\"}, \"location\":{\"id\":\"tntMydD2eF\", \"name\":\"SUY4\", \"referenceId\":\"a\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.77900143\"}, {\"$numberDouble\":\"-1.0437709780741264\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"OndgJHF0T_V\", \"name\":\"plh5nQW\", \"cpf\":\"gS92YtyL\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-418680000000\"}}, \"gender\":\"jVmfVIoryj\", \"entryDate\":{\"$date\":{\"$numberLong\":\"1579582800000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2863483200000\"}}, \"active\":true, \"location\":{\"id\":\"xtIt\", \"name\":\"6o\", \"referenceId\":\"igGzZ2mR\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.29726640606246313\"}, {\"$numberDouble\":\"0.5558690225228912\"}], \"type\":\"Point\"}}}, {\"id\":\"whlz5MJA6\", \"name\":\"\", \"cpf\":\"376L\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2189822400000\"}}, \"gender\":\"C5h\", \"entryDate\":{\"$date\":{\"$numberLong\":\"2512440000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"103957200000\"}}, \"active\":true, \"location\":{\"id\":\"kudmY8aVaiulY\", \"name\":\"E\", \"referenceId\":\"gjTDAOtbpxBEaBQ\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.821080614493116\"}, {\"$numberDouble\":\"0.8184456340324308\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"-1942\"}, \"machineIdentifier\":{\"$numberInt\":\"-242\"}, \"processIdentifier\":{\"$numberInt\":\"452\"}, \"counter\":{\"$numberInt\":\"444\"}}, \"name\":\"_EM_7603_XYZ_\", \"description\":\"I\", \"quantity\":{\"$numberInt\":\"169\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"495\"}, \"machineIdentifier\":{\"$numberInt\":\"593\"}, \"processIdentifier\":{\"$numberInt\":\"325\"}, \"counter\":{\"$numberInt\":\"673\"}}, \"name\":\"_EM_7602_XYZ_\", \"description\":\"rdDYfuvlHc\", \"quantity\":{\"$numberInt\":\"-1048406\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"1049015\"}, \"machineIdentifier\":{\"$numberInt\":\"57\"}, \"processIdentifier\":{\"$numberInt\":\"955\"}, \"counter\":{\"$numberInt\":\"165\"}}, \"name\":\"4rIL_\", \"description\":\"PfkKEbQMIPeXLcDg\", \"quantity\":{\"$numberInt\":\"185\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"760\"}, \"machineIdentifier\":{\"$numberInt\":\"147\"}, \"processIdentifier\":{\"$numberInt\":\"213\"}, \"counter\":{\"$numberInt\":\"613\"}}, \"name\":\"DTY\", \"description\":\"i\", \"quantity\":{\"$numberInt\":\"578\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"1048960\"}, \"machineIdentifier\":{\"$numberInt\":\"465\"}, \"processIdentifier\":{\"$numberInt\":\"9031\"}, \"counter\":{\"$numberInt\":\"588\"}}, \"name\":\"LQq4DT53WFr\", \"description\":\"MJbHx_5TrDCPzX\", \"quantity\":{\"$numberInt\":\"-65053\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"171c5de85caac0fe1ec8ebde\"}}")
            .and().insertInto("HospitalDB", "location_collection")
                .d("{\"id\":\"M9OlGoS7a\", \"name\":\"Y41rqiky\", \"referenceId\":\"rUNSLUUeFX\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.5699373861449112\"}, {\"$numberDouble\":\"0.79168973166374\"}], \"type\":\"Point\"}, \"_id\":{\"$oid\":\"3a22ebfc9a120e31beed5197\"}}")
            .dtos();
        MongoInsertionResultsDto insertionsresult = controller.execInsertionsIntoMongoDatabase(insertions);
        
        // Fault100. HTTP Status 500. br/com/codenation/hospital/services/LocationService_109_findHospitalNearLocationBy.
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 500 not defined for path '/v1/hospitais/maisProximo'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/maisProximo?" + 
                    "lat=0.9071720496812391&" + 
                    "lon=-10.824158865543694&" + 
                    "raioMaximo=5362.3130950453915")
                .then()
                .statusCode(500)// br/com/codenation/hospital/services/LocationService_109_findHospitalNearLocationBy
                .assertThat()
                .contentType("application/json")
                .body("'status'", numberMatches(500.0))
                .body("'error'", containsString("Internal Server Error"))
                .body("'path'", containsString("/v1/hospitais/maisProximo"));
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/{hospital_id}/pacientes/checkout'.
        given().accept("application/json")
                .header("x-EMextraHeader123", "")
                .contentType("application/json")
                .post(baseUrlOfSut + "/v1/hospitais/L5z05gGZz3ZEuHa0/pacientes/checkout")
                .then()
                .statusCode(400)
                .assertThat()
                .contentType("application/json")
                .body("'status'", numberMatches(400.0))
                .body("'error'", containsString("Bad Request"))
                .body("'message'", containsString("Required request body is missing: public org.springframework.http.ResponseEntity<br.com.codenation.hospital.domain.Patient> br.com.codenation.hospital.resource.PatientResource.checkoutPacient(java.lang.String,java.lang.String)"))
                .body("'path'", containsString("/v1/hospitais/L5z05gGZz3ZEuHa0/pacientes/checkout"));
        
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/3dbbce1b70a19f98f531ca42/leitos")
                .then()
                .statusCode(200)
                .assertThat()
                .contentType("application/json")
                .body("'leitos'", numberMatches(258.0));
        
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/h")
                .then()
                .statusCode(404)
                .assertThat()
                .body(isEmptyOrNullString());
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .contentType("application/json")
                .body(" { " + 
                    " \"availableBeds\": 530, " + 
                    " \"beds\": 16777422, " + 
                    " \"id\": \"155\", " + 
                    " \"name\": \"M6BLVlf\" " + 
                    " } ")
                .post(baseUrlOfSut + "/v1/hospitais/")
                .then()
                .statusCode(400)
                .assertThat()
                .body(isEmptyOrNullString());
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/{hospital_id}/proximidades'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/_EM_2320_XYZ_/proximidades")
                .then()
                .statusCode(400)
                .assertThat()
                .body(isEmptyOrNullString());
        
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/:8b8dfa13570834ab9ade0ae/pacientes")
                .then()
                .statusCode(404)
                .assertThat()
                .body(isEmptyOrNullString());
    }
}
