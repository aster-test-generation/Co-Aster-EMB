package em.emtests.split_classes;
/**
* LICENSE DISCLAIMER
* This file has been generated by EvoMaster.
* The content of this file is not subject to the license of EvoMaster itself, i.e., LGPL.
* This generated software (i.e., the test suite in this file) can be freely used, modified, 
* and distributed as you see fit without any restrictions.
*/
import  org.junit.jupiter.api.AfterAll;
import  org.junit.jupiter.api.BeforeAll;
import  org.junit.jupiter.api.BeforeEach;
import  org.junit.jupiter.api.Test;
import  org.junit.jupiter.api.Timeout;
import static org.junit.jupiter.api.Assertions.*;
import  java.util.Map;
import  java.util.Arrays;
import  java.util.List;
import static org.evomaster.test.utils.EMTestUtils.*;
import  org.evomaster.client.java.controller.SutHandler;
import  io.restassured.RestAssured;
import static io.restassured.RestAssured.given;
import  io.restassured.response.ValidatableResponse;
import static org.evomaster.client.java.controller.mongo.dsl.MongoDsl.mongo;
import  org.evomaster.client.java.controller.api.dto.database.operations.MongoInsertionResultsDto;
import  org.evomaster.client.java.controller.api.dto.database.operations.MongoInsertionDto;
import static org.hamcrest.Matchers.*;
import  io.restassured.config.JsonConfig;
import  io.restassured.path.json.config.JsonPathConfig;
import static io.restassured.config.RedirectConfig.redirectConfig;
import static org.evomaster.client.java.controller.contentMatchers.NumberMatcher.*;
import static org.evomaster.client.java.controller.contentMatchers.StringMatcher.*;
import static org.evomaster.client.java.controller.contentMatchers.SubStringMatcher.*;




/**
*  This file was automatically generated by EvoMaster on 2025-09-03T21:43:27.165-04:00[America/New_York]
 * <br>
*  The generated test suite contains 408 tests
 * <br>
*  Covered targets: 2217
 * <br>
*  Used time: 1h 5m 2s
 * <br>
*  Needed budget for current results: 99%
 * <br>
*  
*/

public class EM_gestaohospitaldefault_1234_Test_21_test_21_postOnHospitaisReturnsMismatchResponseWithSchema {
    

    
    private static final SutHandler controller = new em.external.br.com.codenation.hospital.ExternalEvoMasterController("/home/rhuang329/coaster/EMB/exp2/gestaohospital-sut.jar");
    private static String baseUrlOfSut;

    @BeforeAll
    public static void initClass() {
        controller.setupForGeneratedTest();
        baseUrlOfSut = controller.startSut();
        controller.registerOrExecuteInitSqlCommandsIfNeeded();
        assertNotNull(baseUrlOfSut);
        RestAssured.enableLoggingOfRequestAndResponseIfValidationFails();
        RestAssured.useRelaxedHTTPSValidation();
        RestAssured.urlEncodingEnabled = false;
        RestAssured.config = RestAssured.config()
            .jsonConfig(JsonConfig.jsonConfig().numberReturnType(JsonPathConfig.NumberReturnType.DOUBLE))
            .redirect(redirectConfig().followRedirects(false));
    }

    @AfterAll
    public static void tearDown() {
        controller.stopSut();
    }

    @BeforeEach
    public void initTest() {
        controller.resetStateOfSUT();
    }

    /**
    * Calls:
    * 1 - (400) POST:/v1/hospitais/{hospital_id}/pacientes/checkin
    * 2 - (400) POST:/v1/hospitais/{id}/transferencia/{productId}
    * 3 - (400) POST:/v1/hospitais/
    * Found 3 potential faults of type-code 101
    */
    @Test @Timeout(60)
    public void test_21_postOnHospitaisReturnsMismatchResponseWithSchema() throws Exception {
        List<MongoInsertionDto> insertions = mongo().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"bpqVoCNiA\", \"name\":\"\", \"address\":\"_EM_4459_XYZ_\", \"beds\":{\"$numberInt\":\"76\"}, \"availableBeds\":{\"$numberInt\":\"0\"}, \"location\":{\"id\":\"kDSYgjGC2g\", \"name\":\"R7L\", \"referenceId\":\"4NMr1JDv2NgcBEA\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.7639466526340252\"}, {\"$numberDouble\":\"0.6145528104066247\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"_EM_3226_XYZ_u\", \"name\":\"_EM_3227_XYZ_\", \"cpf\":\"2\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-350938800000\"}}, \"gender\":\"sdt\", \"entryDate\":{\"$date\":{\"$numberLong\":\"964670400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-1159124400000\"}}, \"active\":true, \"location\":{\"id\":\"_EM_3637_XYZ_\", \"name\":\"_EM_3638_XYZ_\", \"referenceId\":\"MM2xo9sccTbTf\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"1963948.5560918618\"}, {\"$numberDouble\":\"1.7507457630110657\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"468\"}, \"machineIdentifier\":{\"$numberInt\":\"492\"}, \"processIdentifier\":{\"$numberInt\":\"59\"}, \"counter\":{\"$numberInt\":\"279\"}}, \"name\":\"_EM_3229_XYZ_z\", \"description\":\"nQBJDvCCcz7Pu\", \"quantity\":{\"$numberInt\":\"524708\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"60e00285c6332cfb5073cc9f\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"U63UGTUU\", \"name\":\"o\u0087\", \"address\":\"yu8V\u0087mK\", \"beds\":{\"$numberInt\":\"0\"}, \"availableBeds\":{\"$numberInt\":\"159\"}, \"location\":{\"id\":\"_EM_3230_XYZ_E\", \"name\":\"QmiF4jia05bZ\", \"referenceId\":\"aBU]UUUUZZYoZUQ\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"-1998887.4372804395\"}, {\"$numberDouble\":\"0.0\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"_EM_3639_XYZ_\", \"name\":\"_EM_3640_XYZ_\", \"cpf\":\"Y6E9BYVkyz81n\", \"birthDate\":{\"$date\":{\"$numberLong\":\"306475200000\"}}, \"gender\":\"_EM_3641_XYZ_\", \"entryDate\":{\"$date\":{\"$numberLong\":\"1181793600000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"4102462800000\"}}, \"active\":true, \"location\":{\"id\":\"B7DKFI\", \"name\":\"_EM_3461_XYZ_\", \"referenceId\":\"7BGoh\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.9467887856714625\"}, {\"$numberDouble\":\"0.16074170974138668\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"740\"}, \"machineIdentifier\":{\"$numberInt\":\"343\"}, \"processIdentifier\":{\"$numberInt\":\"-1345\"}, \"counter\":{\"$numberInt\":\"-1\"}}, \"name\":\"_EM_3232_XYZ_\", \"description\":\"_EM_3233_XYZ_\", \"quantity\":{\"$numberInt\":\"497\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"-130275\"}, \"machineIdentifier\":{\"$numberInt\":\"583\"}, \"processIdentifier\":{\"$numberInt\":\"852\"}, \"counter\":{\"$numberInt\":\"842\"}}, \"name\":\"\", \"description\":\"_EM_3234_XYZ_\", \"quantity\":{\"$numberInt\":\"149\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"0\"}, \"machineIdentifier\":{\"$numberInt\":\"707\"}, \"processIdentifier\":{\"$numberInt\":\"680\"}, \"counter\":{\"$numberInt\":\"-2092180446\"}}, \"name\":\"\", \"description\":\"_EM_3235_XYZ_\", \"quantity\":{\"$numberInt\":\"-65470\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"436\"}, \"machineIdentifier\":{\"$numberInt\":\"267579452\"}, \"processIdentifier\":{\"$numberInt\":\"693\"}, \"counter\":{\"$numberInt\":\"16\"}}, \"name\":\"45jKOjK\", \"description\":\"K1burvcuf\", \"quantity\":{\"$numberInt\":\"-8388306\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"fd9066729e3afc0ecf3dee54\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"h6Gdjk\", \"name\":\"_EM_3236_XYZ_\", \"address\":\"_EM_3642_XYZ_\", \"beds\":{\"$numberInt\":\"0\"}, \"availableBeds\":{\"$numberInt\":\"-64\"}, \"location\":{\"id\":\"_EM_3463_XYZ_\", \"name\":\"_EM_3U64_UYZ_\", \"referenceId\":\"_EM_3465_XYZ_\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.7088123666515642\"}, {\"$numberDouble\":\"-0.7282372675018275\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"_EM_3643_XYZ_\", \"name\":\"HUoUHeUdLUU\", \"cpf\":\"\", \"birthDate\":{\"$date\":{\"$numberLong\":\"3843950400000\"}}, \"gender\":\"KItB9C\", \"entryDate\":{\"$date\":{\"$numberLong\":\"958449600000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-1531166400000\"}}, \"active\":true, \"location\":{\"id\":\"52B946tWUTC9ZrPS\", \"name\":\"\", \"referenceId\":\"mw0U5UUUUFUUTU\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.11704813168788308\"}, {\"$numberDouble\":\"0.9479356735199101\"}], \"type\":\"Point\"}}}, {\"id\":\"z:hIMz6kE0KNWJ\", \"name\":\"OE1wCY4\", \"cpf\":\"jAqgAMiswdXUmI\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2721441600000\"}}, \"gender\":\"Z7s7f0nmcNGRM\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-2136826800000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-1128452400000\"}}, \"active\":false, \"location\":{\"id\":\"_EM_3549_XYZ_\", \"name\":\"0gXT3jSDLs\", \"referenceId\":\"zXXQRMtmdJ32judb\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"10191.345831279983\"}, {\"$numberDouble\":\"0.2583781380049277\"}], \"type\":\"Point\"}}}, {\"id\":\"o\", \"name\":\"_EM_3550_XYZ_\", \"cpf\":\"C\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2023246800000\"}}, \"gender\":\"DnL_yT\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1973098800000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-505681200000\"}}, \"active\":false, \"location\":{\"id\":\"3VKW\", \"name\":\"_EM_3551_XYZ_\", \"referenceId\":\"Y2tE\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.32742736760231506\"}, {\"$numberDouble\":\"0.18792793427344157\"}], \"type\":\"Point\"}}}, {\"id\":\"cBDs4Ae\", \"name\":\"UUUhpUG_4UXKZ9z\", \"cpf\":\"_EM_3237_XYZ_\", \"birthDate\":{\"$date\":{\"$numberLong\":\"3681518400000\"}}, \"gender\":\"0`GDGDSS70_x\", \"entryDate\":{\"$date\":{\"$numberLong\":\"1029816000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-1743361200000\"}}, \"active\":true, \"location\":{\"id\":\"m3e\", \"name\":\"Z2HNlOzjaXKS\", \"referenceId\":\"_EM_3240_XYZ_\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"-3.3398732373072226E7\"}, {\"$numberDouble\":\"-52544.498\"}], \"type\":\"Point\"}}}, {\"id\":\"isX7c0\", \"name\":\"yMv\", \"cpf\":\"Kox4;ofY\", \"birthDate\":{\"$date\":{\"$numberLong\":\"3157765200000\"}}, \"gender\":\"BAkWAJb\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-336081600000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2375496000000\"}}, \"active\":true, \"location\":{\"id\":\"CMnt6G\", \"name\":\"uQCNiUXAQIJ4eHd\", \"referenceId\":\"zJaBV35W_lG9\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"1.7304121933802465\"}, {\"$numberDouble\":\"1.0271333083685126\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"0\"}, \"machineIdentifier\":{\"$numberInt\":\"107\"}, \"processIdentifier\":{\"$numberInt\":\"0\"}, \"counter\":{\"$numberInt\":\"438\"}}, \"name\":\"7\", \"description\":\"oEm\", \"quantity\":{\"$numberInt\":\"0\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"938\"}, \"machineIdentifier\":{\"$numberInt\":\"527\"}, \"processIdentifier\":{\"$numberInt\":\"560\"}, \"counter\":{\"$numberInt\":\"1866253875\"}}, \"name\":\"DeVpSTyvI1jjG\", \"description\":\"soHhef\", \"quantity\":{\"$numberInt\":\"430\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"5ca11a7d2305956abdd53a9f\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"_EM_3644_XYZ_\", \"name\":\"ZUUmZ66B7U9\", \"address\":\"_EM_4460_XYZ_\", \"beds\":{\"$numberInt\":\"-8388608\"}, \"availableBeds\":{\"$numberInt\":\"615\"}, \"location\":{\"id\":\"_EM_3645_XYZ_\", \"name\":\"aCgse\u0080zI\", \"referenceId\":\"_EM_3557_XYZ_8\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"-382460.60598956025\"}, {\"$numberDouble\":\"19282.23592528011\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"K1burvcuf\", \"name\":\"_EM_3655_XYZ_\", \"cpf\":\"_EM_3558_XYZ_\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2671761600000\"}}, \"gender\":\"qYeDiv9mL0\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-422049600000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2937618000000\"}}, \"active\":true, \"location\":{\"id\":\"N08S\", \"name\":\"L\", \"referenceId\":\"lUjruxEq5\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.8769261554868669\"}, {\"$numberDouble\":\"0.9443640913570963\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"-260834300\"}, \"machineIdentifier\":{\"$numberInt\":\"46\"}, \"processIdentifier\":{\"$numberInt\":\"90\"}, \"counter\":{\"$numberInt\":\"858\"}}, \"name\":\"jUGK3i\", \"description\":\"QhU7\", \"quantity\":{\"$numberInt\":\"131752\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"252\"}, \"machineIdentifier\":{\"$numberInt\":\"421\"}, \"processIdentifier\":{\"$numberInt\":\"511\"}, \"counter\":{\"$numberInt\":\"576\"}}, \"name\":\"K5ZwK\", \"description\":\"naGW\", \"quantity\":{\"$numberInt\":\"408\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"33\"}, \"machineIdentifier\":{\"$numberInt\":\"66492\"}, \"processIdentifier\":{\"$numberInt\":\"-977\"}, \"counter\":{\"$numberInt\":\"1000\"}}, \"name\":\"_EM_2700_XYZ_\", \"description\":\"oJ55EvLceLvZIC\", \"quantity\":{\"$numberInt\":\"17374\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"507\"}, \"machineIdentifier\":{\"$numberInt\":\"840\"}, \"processIdentifier\":{\"$numberInt\":\"10\"}, \"counter\":{\"$numberInt\":\"800\"}}, \"name\":\"cU60PpQGKEe4\", \"description\":\"ZSh8M\", \"quantity\":{\"$numberInt\":\"824\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"d7fbfbd8f14d4a151d6ef502\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"_EM_4461_XYZ_\", \"name\":\"U5UWeIQ2VUAUU\", \"address\":\"_EM_3242_XYZ_\", \"beds\":{\"$numberInt\":\"261464\"}, \"availableBeds\":{\"$numberInt\":\"524670\"}, \"location\":{\"id\":\"_EM_3646_XYZ_\", \"name\":\"_EM_3467_XYZ_\", \"referenceId\":\"_EM_3647_XYZ_v\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.0\"}, {\"$numberDouble\":\"0.0\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"XEVUVC\", \"name\":\"hdP1\", \"cpf\":\"WcWXHvTR_Q\", \"birthDate\":{\"$date\":{\"$numberLong\":\"1977105600000\"}}, \"gender\":\"\", \"entryDate\":{\"$date\":{\"$numberLong\":\"2647659600000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-1336075200000\"}}, \"active\":true, \"location\":{\"id\":\"Pp84ooIjwtj\", \"name\":\"FusiUl3\", \"referenceId\":\"4ZuKDr19JS\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.8520099702637818\"}, {\"$numberDouble\":\"0.9143949897343494\"}], \"type\":\"Point\"}}}, {\"id\":\"CGApl9ItN9JX\", \"name\":\"WYUD6ViYaVDb\", \"cpf\":\"kM_LCpYMe\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2286849600000\"}}, \"gender\":\"_EM_3468_XYZ_\", \"entryDate\":{\"$date\":{\"$numberLong\":\"2504750400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-219351600000\"}}, \"active\":false, \"location\":{\"id\":\"iLBlVq7ucWfFx\", \"name\":\"?bKYrTqvH3En\", \"referenceId\":\"_EM_3469_XYZ_\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.2121858311611725\"}, {\"$numberDouble\":\"0.24138135013898054\"}], \"type\":\"Point\"}}}, {\"id\":\"_E4iEe\", \"name\":\"3JxFgt2Y\", \"cpf\":\"TI\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-1917025200000\"}}, \"gender\":\"75Aq2RJcz_\", \"entryDate\":{\"$date\":{\"$numberLong\":\"2951179200000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2059272000000\"}}, \"active\":true, \"location\":{\"id\":\"_EM_3470_XYZ_\", \"name\":\"5moPt2Ch9TUf8\", \"referenceId\":\"_EM_3471_XYZ_\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.7087756297228761\"}, {\"$numberDouble\":\"0.6050565637622861\"}], \"type\":\"Point\"}}}, {\"id\":\"_EM_3648_XYZ_\", \"name\":\"\", \"cpf\":\"NCtbLG_usyu8b\", \"birthDate\":{\"$date\":{\"$numberLong\":\"3658539600000\"}}, \"gender\":\"0UJ1KC\", \"entryDate\":{\"$date\":{\"$numberLong\":\"528609600000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"961128000000\"}}, \"active\":false, \"location\":{\"id\":\"7cvNl_AE\", \"name\":\"o\", \"referenceId\":\"7i\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.5425315561010615\"}, {\"$numberDouble\":\"-0.09342139462660493\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"985\"}, \"machineIdentifier\":{\"$numberInt\":\"902\"}, \"processIdentifier\":{\"$numberInt\":\"683\"}, \"counter\":{\"$numberInt\":\"638\"}}, \"name\":\"n_j3264gt\", \"description\":\"BpHJMNj\", \"quantity\":{\"$numberInt\":\"840\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"909\"}, \"machineIdentifier\":{\"$numberInt\":\"489\"}, \"processIdentifier\":{\"$numberInt\":\"195\"}, \"counter\":{\"$numberInt\":\"864\"}}, \"name\":\"8w9z\", \"description\":\"i\", \"quantity\":{\"$numberInt\":\"317\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"786\"}, \"machineIdentifier\":{\"$numberInt\":\"524978\"}, \"processIdentifier\":{\"$numberInt\":\"854\"}, \"counter\":{\"$numberInt\":\"17223\"}}, \"name\":\"5_s\", \"description\":\"IG9\", \"quantity\":{\"$numberInt\":\"589\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"-262094\"}, \"machineIdentifier\":{\"$numberInt\":\"824\"}, \"processIdentifier\":{\"$numberInt\":\"112\"}, \"counter\":{\"$numberInt\":\"-2096388\"}}, \"name\":\"oukC8V8Id\", \"description\":\"PtOOh\", \"quantity\":{\"$numberInt\":\"0\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"-261489\"}, \"machineIdentifier\":{\"$numberInt\":\"0\"}, \"processIdentifier\":{\"$numberInt\":\"809\"}, \"counter\":{\"$numberInt\":\"0\"}}, \"name\":\"DuFyBDVd\", \"description\":\"ROXXGHUU\", \"quantity\":{\"$numberInt\":\"359\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"860200dbf24fe2f7d048ac86\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"US\", \"name\":\"\", \"address\":\"_f3jTik2HVVnqTtZ\", \"beds\":{\"$numberInt\":\"0\"}, \"availableBeds\":{\"$numberInt\":\"50\"}, \"location\":{\"id\":\"cq8wuFUjb\", \"name\":\"BlL4Y0JE65Bx8WBz\", \"referenceId\":\"3XU3P\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.5748171718095231\"}, {\"$numberDouble\":\"270.1998722420952\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"b50_B5Qc\", \"name\":\"_EM_4462_XYZ_\", \"cpf\":\"_EM_4463_XYZ_\", \"birthDate\":{\"$date\":{\"$numberLong\":\"951195600000\"}}, \"gender\":\"_EM_4464_XYZ_\", \"entryDate\":{\"$date\":{\"$numberLong\":\"766468800000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"562222800000\"}}, \"active\":true, \"location\":{\"id\":\"\", \"name\":\"90js7an_ILuI2K\", \"referenceId\":\"GMA5tNkDOYhz4S\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.11074639641894968\"}, {\"$numberDouble\":\"0.7337833897058984\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"206\"}, \"machineIdentifier\":{\"$numberInt\":\"303\"}, \"processIdentifier\":{\"$numberInt\":\"858\"}, \"counter\":{\"$numberInt\":\"0\"}}, \"name\":\"OpenxR\", \"description\":\"t9ML7FUC_FUSUUP\", \"quantity\":{\"$numberInt\":\"947\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"827\"}, \"machineIdentifier\":{\"$numberInt\":\"792\"}, \"processIdentifier\":{\"$numberInt\":\"958\"}, \"counter\":{\"$numberInt\":\"703\"}}, \"name\":\"Nn0uBMcU0GDrBh\", \"description\":\"5DHo7JLEcR4\", \"quantity\":{\"$numberInt\":\"484\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"544\"}, \"machineIdentifier\":{\"$numberInt\":\"377\"}, \"processIdentifier\":{\"$numberInt\":\"716\"}, \"counter\":{\"$numberInt\":\"-65382\"}}, \"name\":\"_EM_3656_XYZ_\", \"description\":\"Dsl\", \"quantity\":{\"$numberInt\":\"-3402\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"853\"}, \"machineIdentifier\":{\"$numberInt\":\"472\"}, \"processIdentifier\":{\"$numberInt\":\"428\"}, \"counter\":{\"$numberInt\":\"-4193627\"}}, \"name\":\"_EM_3657_XYZ_\", \"description\":\"QyAiJwLbKVLRYFz2\", \"quantity\":{\"$numberInt\":\"247\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"479\"}, \"machineIdentifier\":{\"$numberInt\":\"654\"}, \"processIdentifier\":{\"$numberInt\":\"523\"}, \"counter\":{\"$numberInt\":\"847\"}}, \"name\":\"n0\", \"description\":\"ZX\", \"quantity\":{\"$numberInt\":\"603\"}, \"productType\":\"COMMON\"}], \"_id\":{\"$oid\":\"4ffe0e34bab4fedd6e7cea6a\"}}")
            .and().insertInto("HospitalDB", "location_collection")
                .d("{\"id\":\"gM\", \"name\":\"yjoJw7T32hl_nx_1\", \"referenceId\":\"_EM_4465_XYZ_\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.1983183527670499\"}, {\"$numberDouble\":\"0.37121420070531347\"}], \"type\":\"Point\"}, \"_id\":{\"$oid\":\"6b3df05c1961268472cb5fa0\"}}")
            .and().insertInto("HospitalDB", "product_collection")
                .d("{\"name\":\"nH\", \"description\":\"d5M\", \"quantity\":{\"$numberInt\":\"88\"}, \"productType\":\"COMMON\", \"_id\":{\"$oid\":\"4d1b6f7e299ba43e1cc409ea\"}}")
            .dtos();
        MongoInsertionResultsDto insertionsresult = controller.execInsertionsIntoMongoDatabase(insertions);
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/{hospital_id}/pacientes/checkin'.
        given().accept("application/json")
                .header("x-EMextraHeader123", "")
                .contentType("application/json")
                .body(" { " + 
                    " \"active\": false, " + 
                    " \"cpf\": \"3UUUQm\", " + 
                    " \"entryDate\": \"2000-06-15T12:38:45.499Z\", " + 
                    " \"exitDate\": \"2000-02-24T23:06:50.664-06:38\", " + 
                    " \"gender\": \"_EM_3472_XYZ_U\", " + 
                    " \"id\": \"Hr4\", " + 
                    " \"location\": { " + 
                    " \"id\": \"ZrWVn\", " + 
                    " \"location\": { " + 
                    " \"coordinates\": [ " + 
                    " 8.988465674311579E307, " + 
                    " 0.9615918049220652, " + 
                    " 0.4538833509857022, " + 
                    " 0.0, " + 
                    " 0.39059913555047526 " + 
                    " ], " + 
                    " \"type\": \"_EM_3649_XYZ_\", " + 
                    " \"x\": 0.21232972805897787, " + 
                    " \"y\": 0.30522776234840987 " + 
                    " }, " + 
                    " \"locationCategory\": \"EVOMASTER\", " + 
                    " \"name\": \"_EM_3650_XYZ_\", " + 
                    " \"position\": { " + 
                    " \"coordinates\": [ " + 
                    " 0.17960626013886805, " + 
                    " 0.46214079212573067 " + 
                    " ], " + 
                    " \"type\": \"YUdsqVUUU0\", " + 
                    " \"x\": 0.0, " + 
                    " \"y\": -356.88934731221076 " + 
                    " }, " + 
                    " \"referenceId\": \"Pjj2\" " + 
                    " }, " + 
                    " \"name\": \"_EM_3651_XYZ_\" " + 
                    " } ")
                .post(baseUrlOfSut + "/v1/hospitais/_EM_1118_XYZ_S/pacientes/checkin")
                .then()
                .statusCode(400)
                .assertThat()
                .contentType("application/json")
                .body("'status'", numberMatches(400.0))
                .body("'error'", containsString("Bad Request"))
                .body("'message'", containsString("JSON parse error: Cannot deserialize value of type `br.com.codenation.hospital.domain.LocationCategory` from String \"EVOMASTER\": value not one of declared Enum instance names: [HOSPITAL, PATIENT]; nested exception is com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize value of type `br.com.codenation.hospital.domain.LocationCategory` from String \"EVOMASTER\": value not one of declared Enum instance names: [HOSPITAL, PATIENT]\n at [Source: (ByteArrayInputStream); line: 1, column: 394] (through reference chain: br.com.codenation.hospital.domain.Patient[\"location\"]->br.com.codenation.hospital.domain.Location[\"locationCategory\"])"))
                .body("'path'", containsString("/v1/hospitais/_EM_1118_XYZ_S/pacientes/checkin"));
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/{id}/transferencia/{productId}'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .contentType("application/json")
                .body(" -2097765 ")
                .post(baseUrlOfSut + "/v1/hospitais/fd9066729e3afc0ecf3dee54/transferencia/_EM_3658_XYZ_")
                .then()
                .statusCode(400)
                .assertThat()
                .contentType("application/json")
                .body("'status'", numberMatches(400.0))
                .body("'error'", containsString("Bad Request"))
                .body("'message'", containsString("Produto n√£o cadastrado em nenhum hospital!"))
                .body("'path'", containsString("/v1/hospitais/fd9066729e3afc0ecf3dee54/transferencia/_EM_3658_XYZ_"));
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .contentType("application/json")
                .body(" { " + 
                    " \"beds\": 472, " + 
                    " \"latitude\": \"3rh0jRBlqHSLeP\", " + 
                    " \"longitude\": \"T7s13NT\", " + 
                    " \"name\": \"3RXsaQwC\" " + 
                    " } ")
                .post(baseUrlOfSut + "/v1/hospitais/?EMextraParam123=42")
                .then()
                .statusCode(400)
                .assertThat()
                .body(isEmptyOrNullString());
    }
}
