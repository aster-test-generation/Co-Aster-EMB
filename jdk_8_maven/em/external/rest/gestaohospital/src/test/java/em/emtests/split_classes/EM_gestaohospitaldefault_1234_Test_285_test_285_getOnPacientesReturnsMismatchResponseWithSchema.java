package em.emtests.split_classes;
/**
* LICENSE DISCLAIMER
* This file has been generated by EvoMaster.
* The content of this file is not subject to the license of EvoMaster itself, i.e., LGPL.
* This generated software (i.e., the test suite in this file) can be freely used, modified, 
* and distributed as you see fit without any restrictions.
*/
import  org.junit.jupiter.api.AfterAll;
import  org.junit.jupiter.api.BeforeAll;
import  org.junit.jupiter.api.BeforeEach;
import  org.junit.jupiter.api.Test;
import  org.junit.jupiter.api.Timeout;
import static org.junit.jupiter.api.Assertions.*;
import  java.util.Map;
import  java.util.Arrays;
import  java.util.List;
import static org.evomaster.test.utils.EMTestUtils.*;
import  org.evomaster.client.java.controller.SutHandler;
import  io.restassured.RestAssured;
import static io.restassured.RestAssured.given;
import  io.restassured.response.ValidatableResponse;
import static org.evomaster.client.java.controller.mongo.dsl.MongoDsl.mongo;
import  org.evomaster.client.java.controller.api.dto.database.operations.MongoInsertionResultsDto;
import  org.evomaster.client.java.controller.api.dto.database.operations.MongoInsertionDto;
import static org.hamcrest.Matchers.*;
import  io.restassured.config.JsonConfig;
import  io.restassured.path.json.config.JsonPathConfig;
import static io.restassured.config.RedirectConfig.redirectConfig;
import static org.evomaster.client.java.controller.contentMatchers.NumberMatcher.*;
import static org.evomaster.client.java.controller.contentMatchers.StringMatcher.*;
import static org.evomaster.client.java.controller.contentMatchers.SubStringMatcher.*;




/**
*  This file was automatically generated by EvoMaster on 2025-09-03T21:43:27.165-04:00[America/New_York]
 * <br>
*  The generated test suite contains 408 tests
 * <br>
*  Covered targets: 2217
 * <br>
*  Used time: 1h 5m 2s
 * <br>
*  Needed budget for current results: 99%
 * <br>
*  
*/

public class EM_gestaohospitaldefault_1234_Test_285_test_285_getOnPacientesReturnsMismatchResponseWithSchema {
    

    
    private static final SutHandler controller = new em.external.br.com.codenation.hospital.ExternalEvoMasterController("/home/rhuang329/coaster/EMB/exp2/gestaohospital-sut.jar");
    private static String baseUrlOfSut;

    @BeforeAll
    public static void initClass() {
        controller.setupForGeneratedTest();
        baseUrlOfSut = controller.startSut();
        controller.registerOrExecuteInitSqlCommandsIfNeeded();
        assertNotNull(baseUrlOfSut);
        RestAssured.enableLoggingOfRequestAndResponseIfValidationFails();
        RestAssured.useRelaxedHTTPSValidation();
        RestAssured.urlEncodingEnabled = false;
        RestAssured.config = RestAssured.config()
            .jsonConfig(JsonConfig.jsonConfig().numberReturnType(JsonPathConfig.NumberReturnType.DOUBLE))
            .redirect(redirectConfig().followRedirects(false));
    }

    @AfterAll
    public static void tearDown() {
        controller.stopSut();
    }

    @BeforeEach
    public void initTest() {
        controller.resetStateOfSUT();
    }

    /**
    * Calls:
    * 1 - (200) GET:/v1/hospitais/
    * 2 - (404) POST:/v1/hospitais/{hospital_id}/pacientes/checkout
    * 3 - (400) GET:/v1/hospitais/{id}/leitos
    * 4 - (400) POST:/v1/hospitais/{id}/transferencia/{productId}
    * 5 - (400) POST:/v1/hospitais/
    * 6 - (400) GET:/v1/hospitais/{hospital_id}/proximidades
    * 7 - (404) GET:/v1/hospitais/{hospital_id}/pacientes
    * Found 4 potential faults of type-code 101
    */
    @Test @Timeout(60)
    public void test_285_getOnPacientesReturnsMismatchResponseWithSchema() throws Exception {
        List<MongoInsertionDto> insertions = mongo().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"KgJCOzUAIGrk2\", \"name\":\"ClrA0Rgmy0\", \"address\":\"iO6Y9gpQu4vEWi\", \"beds\":{\"$numberInt\":\"-74\"}, \"availableBeds\":{\"$numberInt\":\"259\"}, \"location\":{\"id\":\"jqk5NhsHo4Is\", \"name\":\"deyWqE8y\", \"referenceId\":\"vowg\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.379517499427917\"}, {\"$numberDouble\":\"0.3545476049639049\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"eCpQ\", \"name\":\"ue\", \"cpf\":\"vJHIxLNPbQy_J2\", \"birthDate\":{\"$date\":{\"$numberLong\":\"3909186000000\"}}, \"gender\":\"Enx7x2OqsawCw\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1268074800000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2393467200000\"}}, \"active\":true, \"location\":{\"id\":\"5\", \"name\":\"\", \"referenceId\":\"pps\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.5947515389001622\"}, {\"$numberDouble\":\"0.7443097670077193\"}], \"type\":\"Point\"}}}, {\"id\":\"SYX6f0_gS1KQN2s\", \"name\":\"aLNo2jHwxL5ni\", \"cpf\":\"nY2e3z\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-2049562800000\"}}, \"gender\":\"xxJTOH\", \"entryDate\":{\"$date\":{\"$numberLong\":\"3978910800000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2332904400000\"}}, \"active\":true, \"location\":{\"id\":\"FSqvVFhl\", \"name\":\"0A62o4UUu\", \"referenceId\":\"ki3kqvCmR8j\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.17958780133581953\"}, {\"$numberDouble\":\"0.6630382327295755\"}], \"type\":\"Point\"}}}, {\"id\":\"U5TXM9u5a4Eq\", \"name\":\"T0Ac3huPQ\", \"cpf\":\"K6pGZAt\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2403579600000\"}}, \"gender\":\"\", \"entryDate\":{\"$date\":{\"$numberLong\":\"3600046800000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2141528400000\"}}, \"active\":true, \"location\":{\"id\":\"raIgJeIJjPsf\", \"name\":\"J\", \"referenceId\":\"XLpS\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.44788761610872263\"}, {\"$numberDouble\":\"0.13476312558015946\"}], \"type\":\"Point\"}}}, {\"id\":\"TpsZWeHu_10\", \"name\":\"\", \"cpf\":\"\", \"birthDate\":{\"$date\":{\"$numberLong\":\"960609600000\"}}, \"gender\":\"ZwqRq\", \"entryDate\":{\"$date\":{\"$numberLong\":\"3821317200000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"123397200000\"}}, \"active\":false, \"location\":{\"id\":\"CRrtbh8fA01D\", \"name\":\"ZhAtkPN\", \"referenceId\":\"5PKdMr\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.39759665884612905\"}, {\"$numberDouble\":\"0.5503308308388585\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"956\"}, \"machineIdentifier\":{\"$numberInt\":\"168\"}, \"processIdentifier\":{\"$numberInt\":\"100\"}, \"counter\":{\"$numberInt\":\"445\"}}, \"name\":\"n5U6k1\", \"description\":\"hX1Qx6ZTa5bl\", \"quantity\":{\"$numberInt\":\"814\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"2876\"}, \"machineIdentifier\":{\"$numberInt\":\"86\"}, \"processIdentifier\":{\"$numberInt\":\"-31966\"}, \"counter\":{\"$numberInt\":\"923021816\"}}, \"name\":\"miKrlf\", \"description\":\"iElPN43uPXfcQFLAw\", \"quantity\":{\"$numberInt\":\"802884707\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"684\"}, \"machineIdentifier\":{\"$numberInt\":\"317\"}, \"processIdentifier\":{\"$numberInt\":\"820\"}, \"counter\":{\"$numberInt\":\"903\"}}, \"name\":\"jm4ESvF\", \"description\":\"q2sqEkx1V41eu\", \"quantity\":{\"$numberInt\":\"331\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"3ccccf1b80b0be88f530db22\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"_EM_7121_XYZ_\", \"name\":\"W1fiQG74N\", \"address\":\"C\", \"beds\":{\"$numberInt\":\"-130421\"}, \"availableBeds\":{\"$numberInt\":\"435\"}, \"location\":{\"id\":\"Pr2Ft2lgKMN\", \"name\":\"\", \"referenceId\":\"_EM_3819_XYZ_\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.4387920784755074\"}, {\"$numberDouble\":\"0.8840991967740897\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"W\", \"name\":\"zVzEjinpn4w7zB\", \"cpf\":\"_EM_4082_XYZ_\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-1492891200000\"}}, \"gender\":\"FXJN\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1241899200000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2271992400000\"}}, \"active\":false, \"location\":{\"id\":\"1ikT\", \"name\":\"Ul2\", \"referenceId\":\"N0R9Y3D8q3VR\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.23098717498815913\"}, {\"$numberDouble\":\"0.20553193588807483\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"334\"}, \"machineIdentifier\":{\"$numberInt\":\"543\"}, \"processIdentifier\":{\"$numberInt\":\"485\"}, \"counter\":{\"$numberInt\":\"151\"}}, \"name\":\"\", \"description\":\"x5nNjlTWf\", \"quantity\":{\"$numberInt\":\"154\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"7e9c9b0ec932d8d8c72c867b\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"_EM_4083_XYZ_\", \"name\":\"Ulq6UU\", \"address\":\"_EM_4084_XYZ_\", \"beds\":{\"$numberInt\":\"0\"}, \"availableBeds\":{\"$numberInt\":\"13076\"}, \"location\":{\"id\":\"pwvO\", \"name\":\"YM9FKLxCarcBHO\", \"referenceId\":\"_EM_7122_XYZ_\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.943\"}, {\"$numberDouble\":\"-0.11502968601606779\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"N95Gxtj17vLmG\", \"name\":\"L4DCn8ahG9YzFd\", \"cpf\":\"ztwDZyb6v\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-2083863600000\"}}, \"gender\":\"N8\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1340654400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"3947461200000\"}}, \"active\":false, \"location\":{\"id\":\"NubjuR9ROUy\", \"name\":\"Q3od7vSHrYRPs\", \"referenceId\":\"H\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.47494730297525667\"}, {\"$numberDouble\":\"0.2980395607486127\"}], \"type\":\"Point\"}}}, {\"id\":\"z9CSIOuFq\", \"name\":\"cj2\", \"cpf\":\"_59\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2148440400000\"}}, \"gender\":\"4gkXCVhu2ff7zqdI\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-524520000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"3296606400000\"}}, \"active\":false, \"location\":{\"id\":\"_uPDA_Vz_wEw\", \"name\":\"0kLtEQnsQAt9dfQH\", \"referenceId\":\"3p\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.9180894516214159\"}, {\"$numberDouble\":\"0.05590151584745284\"}], \"type\":\"Point\"}}}, {\"id\":\"RjFSuvQLsj2\", \"name\":\"cJ\u0089xdE\", \"cpf\":\"XHU6Kh\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2257214400000\"}}, \"gender\":\"5bpC_c9GkHynSy\", \"entryDate\":{\"$date\":{\"$numberLong\":\"961128000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"1886558400000\"}}, \"active\":false, \"location\":{\"id\":\"R\", \"name\":\"Li7xyddV\", \"referenceId\":\"_EM_3821_XYZ_\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"-608.3188805773317\"}, {\"$numberDouble\":\"0.0\"}], \"type\":\"Point\"}}}, {\"id\":\"\", \"name\":\"hp\", \"cpf\":\"WfWquYbavkc\", \"birthDate\":{\"$date\":{\"$numberLong\":\"1658376000000\"}}, \"gender\":\"xQLXet3Io\", \"entryDate\":{\"$date\":{\"$numberLong\":\"1471406400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"3494376000000\"}}, \"active\":true, \"location\":{\"id\":\"FjORex\", \"name\":\"7Es\", \"referenceId\":\"fMOBg07\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.23242065082967223\"}, {\"$numberDouble\":\"0.728905171732254\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"872\"}, \"machineIdentifier\":{\"$numberInt\":\"231\"}, \"processIdentifier\":{\"$numberInt\":\"468\"}, \"counter\":{\"$numberInt\":\"177\"}}, \"name\":\"_d3nf4T7HIzqA\", \"description\":\"\", \"quantity\":{\"$numberInt\":\"729\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"991\"}, \"machineIdentifier\":{\"$numberInt\":\"942425397\"}, \"processIdentifier\":{\"$numberInt\":\"48\"}, \"counter\":{\"$numberInt\":\"87\"}}, \"name\":\"r8\", \"description\":\"8P_0D8\", \"quantity\":{\"$numberInt\":\"332\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"684\"}, \"machineIdentifier\":{\"$numberInt\":\"228\"}, \"processIdentifier\":{\"$numberInt\":\"141\"}, \"counter\":{\"$numberInt\":\"89\"}}, \"name\":\"x\", \"description\":\"yVXrxuoAZQl7\", \"quantity\":{\"$numberInt\":\"59\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"95\"}, \"machineIdentifier\":{\"$numberInt\":\"522\"}, \"processIdentifier\":{\"$numberInt\":\"761\"}, \"counter\":{\"$numberInt\":\"854\"}}, \"name\":\"_EM_4085_XYZ_\", \"description\":\"B5zNKtY\", \"quantity\":{\"$numberInt\":\"712\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"480\"}, \"machineIdentifier\":{\"$numberInt\":\"30\"}, \"processIdentifier\":{\"$numberInt\":\"404\"}, \"counter\":{\"$numberInt\":\"855\"}}, \"name\":\"LcpYWC_oVR7\", \"description\":\"\", \"quantity\":{\"$numberInt\":\"913\"}, \"productType\":\"COMMON\"}], \"_id\":{\"$oid\":\"e6bb732506a0bc6aabdb7f86\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"UMY12Ol6oTd\", \"name\":\"64gNXNcjepp9L\", \"address\":\"_EM_7123_XYZ_\", \"beds\":{\"$numberInt\":\"1048695\"}, \"availableBeds\":{\"$numberInt\":\"536\"}, \"location\":{\"id\":\"DRRG_eLS\", \"name\":\"K\", \"referenceId\":\"1lDwaFHxETWEFOd\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.22245415096611543\"}, {\"$numberDouble\":\"0.82303854692236\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"_EM_7124_XYZ_\", \"name\":\"yd9J9jiOq\", \"cpf\":\"GYtY\", \"birthDate\":{\"$date\":{\"$numberLong\":\"4093041600000\"}}, \"gender\":\"\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1422990000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"1767762000000\"}}, \"active\":false, \"location\":{\"id\":\"3xa1oMWhuaAARfp\", \"name\":\"05knJ8zduKIbi865\", \"referenceId\":\"Ew\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"-0.42633091472131535\"}, {\"$numberDouble\":\"-53014.87273820391\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"504\"}, \"machineIdentifier\":{\"$numberInt\":\"31\"}, \"processIdentifier\":{\"$numberInt\":\"141\"}, \"counter\":{\"$numberInt\":\"959\"}}, \"name\":\"bWkfGl0\", \"description\":\"k5slD8K\", \"quantity\":{\"$numberInt\":\"828\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"871\"}, \"machineIdentifier\":{\"$numberInt\":\"209\"}, \"processIdentifier\":{\"$numberInt\":\"720\"}, \"counter\":{\"$numberInt\":\"383\"}}, \"name\":\"\", \"description\":\"NJyfGlhLMwHa\", \"quantity\":{\"$numberInt\":\"97\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"255\"}, \"machineIdentifier\":{\"$numberInt\":\"629\"}, \"processIdentifier\":{\"$numberInt\":\"585\"}, \"counter\":{\"$numberInt\":\"494\"}}, \"name\":\"jy3\", \"description\":\"HJ6Ddl\", \"quantity\":{\"$numberInt\":\"551\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"571\"}, \"machineIdentifier\":{\"$numberInt\":\"435\"}, \"processIdentifier\":{\"$numberInt\":\"686\"}, \"counter\":{\"$numberInt\":\"584\"}}, \"name\":\"xVp6cz\", \"description\":\"FUzhaUJ\", \"quantity\":{\"$numberInt\":\"2682\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"3bbc202547f2c06dfc7cf9bf\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"_EM_7125_XYZ_\", \"name\":\"Clj\", \"address\":\"Wd1BZuQ\", \"beds\":{\"$numberInt\":\"171\"}, \"availableBeds\":{\"$numberInt\":\"945\"}, \"location\":{\"id\":\"UAZ9IGOb\", \"name\":\"7akj\", \"referenceId\":\"cLpoBde7Umnwt\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.3642453979506082\"}, {\"$numberDouble\":\"0.5247306005752848\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"x\", \"name\":\"ejrDUnA6BfW\", \"cpf\":\"5ljTpqOIt\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-976820400000\"}}, \"gender\":\"SwXfnEy\", \"entryDate\":{\"$date\":{\"$numberLong\":\"888987600000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2644632000000\"}}, \"active\":false, \"location\":{\"id\":\"Bm8r31sKQpI\", \"name\":\"H7zHWYk\", \"referenceId\":\"H3naeHif4hC\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.2570555668043937\"}, {\"$numberDouble\":\"0.10415955543129929\"}], \"type\":\"Point\"}}}, {\"id\":\"Ulu5bh9FqYoyq1\", \"name\":\"Zznp0Hv5\", \"cpf\":\"VDD\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-1238007600000\"}}, \"gender\":\"kaFeVIKWSN6DaZV\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1718910000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2934248400000\"}}, \"active\":true, \"location\":{\"id\":\"vQ\", \"name\":\"To\", \"referenceId\":\"OStkqhfO7ls7CLqc\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.7883283811129179\"}, {\"$numberDouble\":\"0.9284225870450352\"}], \"type\":\"Point\"}}}, {\"id\":\"dnnGRAz5yU\", \"name\":\"2JyDccw1SFm1Rj\", \"cpf\":\"kyEiyo\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-86036400000\"}}, \"gender\":\"plkYSX9mFwVu\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1996772400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-2145294000000\"}}, \"active\":true, \"location\":{\"id\":\"kUnqp\", \"name\":\"\", \"referenceId\":\"eoXm6fKkIzf\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.9180841234415513\"}, {\"$numberDouble\":\"0.8605257849315029\"}], \"type\":\"Point\"}}}, {\"id\":\"7y0HdlQQBzjg3kB0\", \"name\":\"mAtb56iqWJ0LyFd\", \"cpf\":\"xxcDkY1aI4xLj\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-975610800000\"}}, \"gender\":\"\", \"entryDate\":{\"$date\":{\"$numberLong\":\"4066866000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-2083863600000\"}}, \"active\":false, \"location\":{\"id\":\"kyTGP\", \"name\":\"k85PFDqIdBimeol\", \"referenceId\":\"1RP\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.654554385920883\"}, {\"$numberDouble\":\"0.7138669305765155\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"262\"}, \"machineIdentifier\":{\"$numberInt\":\"131\"}, \"processIdentifier\":{\"$numberInt\":\"788\"}, \"counter\":{\"$numberInt\":\"654\"}}, \"name\":\"eK\", \"description\":\"sj\", \"quantity\":{\"$numberInt\":\"562\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"621\"}, \"machineIdentifier\":{\"$numberInt\":\"577\"}, \"processIdentifier\":{\"$numberInt\":\"336\"}, \"counter\":{\"$numberInt\":\"740\"}}, \"name\":\"wfje0hYWH\", \"description\":\"hba\", \"quantity\":{\"$numberInt\":\"665\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"470\"}, \"machineIdentifier\":{\"$numberInt\":\"0\"}, \"processIdentifier\":{\"$numberInt\":\"932\"}, \"counter\":{\"$numberInt\":\"0\"}}, \"name\":\"Kant885\", \"description\":\"h9F4oUaFkioUTo6\", \"quantity\":{\"$numberInt\":\"0\"}, \"productType\":\"COMMON\"}], \"_id\":{\"$oid\":\"b24ba7bced4967f6f7fa0d0b\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"_EM_4086_XYZ_\", \"name\":\"7OYrqoto\", \"address\":\"kzmoj\", \"beds\":{\"$numberInt\":\"341\"}, \"availableBeds\":{\"$numberInt\":\"-1874266498\"}, \"location\":{\"id\":\"tntUydD2e\", \"name\":\"SYW4\", \"referenceId\":\"a\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.779001425021289\"}, {\"$numberDouble\":\"0.7258859330285893\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"OndgJHF0T_V\", \"name\":\"plh5nQW\", \"cpf\":\"gS92YtyL\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-418680000000\"}}, \"gender\":\"jVmfVIoryj\", \"entryDate\":{\"$date\":{\"$numberLong\":\"1579582800000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2863483200000\"}}, \"active\":true, \"location\":{\"id\":\"xtIt\", \"name\":\"6o\", \"referenceId\":\"igGzZ2mR\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.29726640606246313\"}, {\"$numberDouble\":\"0.5558690225228912\"}], \"type\":\"Point\"}}}, {\"id\":\"whlz5MJA6\", \"name\":\"\", \"cpf\":\"376L\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2189822400000\"}}, \"gender\":\"C5h\", \"entryDate\":{\"$date\":{\"$numberLong\":\"2512440000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"103957200000\"}}, \"active\":true, \"location\":{\"id\":\"kudmY8aVaiulY\", \"name\":\"E\", \"referenceId\":\"gjTDAOtbpxBEaBQ\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.821080614493116\"}, {\"$numberDouble\":\"0.8184456340324308\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"106\"}, \"machineIdentifier\":{\"$numberInt\":\"782\"}, \"processIdentifier\":{\"$numberInt\":\"452\"}, \"counter\":{\"$numberInt\":\"444\"}}, \"name\":\"8s7YsMuAx6jjtM\", \"description\":\"M\", \"quantity\":{\"$numberInt\":\"168\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"495\"}, \"machineIdentifier\":{\"$numberInt\":\"593\"}, \"processIdentifier\":{\"$numberInt\":\"325\"}, \"counter\":{\"$numberInt\":\"673\"}}, \"name\":\"Fu5rHZxMN2\", \"description\":\"rdDYfuvlJcb\", \"quantity\":{\"$numberInt\":\"170\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"439\"}, \"machineIdentifier\":{\"$numberInt\":\"89\"}, \"processIdentifier\":{\"$numberInt\":\"955\"}, \"counter\":{\"$numberInt\":\"164\"}}, \"name\":\"4rIL_\", \"description\":\"PfkKEbQMIPeXLcDg\", \"quantity\":{\"$numberInt\":\"217\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"760\"}, \"machineIdentifier\":{\"$numberInt\":\"147\"}, \"processIdentifier\":{\"$numberInt\":\"213\"}, \"counter\":{\"$numberInt\":\"613\"}}, \"name\":\"DTY\", \"description\":\"i\", \"quantity\":{\"$numberInt\":\"578\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"384\"}, \"machineIdentifier\":{\"$numberInt\":\"465\"}, \"processIdentifier\":{\"$numberInt\":\"839\"}, \"counter\":{\"$numberInt\":\"588\"}}, \"name\":\"LQq4DT53WFr\", \"description\":\"MJbFx_5TrDCPzX\", \"quantity\":{\"$numberInt\":\"-65059\"}, \"productType\":\"COMMON\"}], \"_id\":{\"$oid\":\"082a5de85cabbffe2fc70ade\"}}")
            .dtos();
        MongoInsertionResultsDto insertionsresult = controller.execInsertionsIntoMongoDatabase(insertions);
        
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/")
                .then()
                .statusCode(200)
                .assertThat()
                .contentType("application/json")
                .body("size()", equalTo(6))
                .body("[0].'name'", containsString("ClrA0Rgmy0"))
                .body("[0].'address'", containsString("iO6Y9gpQu4vEWi"))
                .body("[0].'beds'", numberMatches(-74.0))
                .body("[0].'availableBeds'", numberMatches(259.0))
                .body("[0].'longitude'", containsString("0.379517499427917"))
                .body("[0].'latitude'", containsString("0.3545476049639049"))
                .body("[1].'name'", containsString("W1fiQG74N"))
                .body("[1].'address'", containsString("C"))
                .body("[1].'beds'", numberMatches(-130421.0))
                .body("[1].'availableBeds'", numberMatches(435.0))
                .body("[1].'longitude'", containsString("0.4387920784755074"))
                .body("[1].'latitude'", containsString("0.8840991967740897"))
                .body("[2].'name'", containsString("Ulq6UU"))
                .body("[2].'address'", containsString("_EM_4084_XYZ_"))
                .body("[2].'beds'", numberMatches(0.0))
                .body("[2].'availableBeds'", numberMatches(13076.0))
                .body("[2].'longitude'", containsString("0.943"))
                .body("[2].'latitude'", containsString("-0.11502968601606779"))
                ; // Skipping assertions on the remaining 3 elements. This limit of 3 elements can be increased in the configurations
        
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .contentType("application/json")
                .body(" _EM_2316_XYZ_ ")
                .post(baseUrlOfSut + "/v1/hospitais/_EM_7126_XYZ_/pacientes/checkout")
                .then()
                .statusCode(404)
                .assertThat()
                .body(isEmptyOrNullString());
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/{id}/leitos'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/_EM_3822_XYZ_/leitos")
                .then()
                .statusCode(400)
                .assertThat()
                .contentType("application/json")
                .body("'status'", numberMatches(400.0))
                .body("'error'", containsString("Bad Request"))
                .body("'message'", containsString("Hospital não encontrado! ID:_EM_3822_XYZ_"))
                .body("'path'", containsString("/v1/hospitais/_EM_3822_XYZ_/leitos"));
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/{id}/transferencia/{productId}'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .contentType("application/json")
                .body(" 389 ")
                .post(baseUrlOfSut + "/v1/hospitais/UtiBlky33/transferencia/_EM_7127_XYZ_")
                .then()
                .statusCode(400)
                .assertThat()
                .contentType("application/json")
                .body("'status'", numberMatches(400.0))
                .body("'error'", containsString("Bad Request"))
                .body("'message'", containsString("Hospital não encontrado! ID:UtiBlky33"))
                .body("'path'", containsString("/v1/hospitais/UtiBlky33/transferencia/_EM_7127_XYZ_"));
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .contentType("application/json")
                .body(" { " + 
                    " \"beds\": 16777422, " + 
                    " \"latitude\": \"_EM_3823_XYZ_\", " + 
                    " \"longitude\": \"_EM_2319_XYZ_\" " + 
                    " } ")
                .post(baseUrlOfSut + "/v1/hospitais/")
                .then()
                .statusCode(400)
                .assertThat()
                .body(isEmptyOrNullString());
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/{hospital_id}/proximidades'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/_EM_2320_XYZ_/proximidades")
                .then()
                .statusCode(400)
                .assertThat()
                .body(isEmptyOrNullString());
        
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/_EM_7128_XYZ_/pacientes")
                .then()
                .statusCode(404)
                .assertThat()
                .body(isEmptyOrNullString());
    }
}
