package em.emtests.split_classes;
/**
* LICENSE DISCLAIMER
* This file has been generated by EvoMaster.
* The content of this file is not subject to the license of EvoMaster itself, i.e., LGPL.
* This generated software (i.e., the test suite in this file) can be freely used, modified, 
* and distributed as you see fit without any restrictions.
*/
import  org.junit.jupiter.api.AfterAll;
import  org.junit.jupiter.api.BeforeAll;
import  org.junit.jupiter.api.BeforeEach;
import  org.junit.jupiter.api.Test;
import  org.junit.jupiter.api.Timeout;
import static org.junit.jupiter.api.Assertions.*;
import  java.util.Map;
import  java.util.Arrays;
import  java.util.List;
import static org.evomaster.test.utils.EMTestUtils.*;
import  org.evomaster.client.java.controller.SutHandler;
import  io.restassured.RestAssured;
import static io.restassured.RestAssured.given;
import  io.restassured.response.ValidatableResponse;
import static org.evomaster.client.java.controller.mongo.dsl.MongoDsl.mongo;
import  org.evomaster.client.java.controller.api.dto.database.operations.MongoInsertionResultsDto;
import  org.evomaster.client.java.controller.api.dto.database.operations.MongoInsertionDto;
import static org.hamcrest.Matchers.*;
import  io.restassured.config.JsonConfig;
import  io.restassured.path.json.config.JsonPathConfig;
import static io.restassured.config.RedirectConfig.redirectConfig;
import static org.evomaster.client.java.controller.contentMatchers.NumberMatcher.*;
import static org.evomaster.client.java.controller.contentMatchers.StringMatcher.*;
import static org.evomaster.client.java.controller.contentMatchers.SubStringMatcher.*;




/**
*  This file was automatically generated by EvoMaster on 2025-09-03T21:43:27.165-04:00[America/New_York]
 * <br>
*  The generated test suite contains 408 tests
 * <br>
*  Covered targets: 2217
 * <br>
*  Used time: 1h 5m 2s
 * <br>
*  Needed budget for current results: 99%
 * <br>
*  
*/

public class EM_gestaohospitaldefault_1234_Test_66_test_66_putOnHospitaiShowsFaults_100_101 {
    

    
    private static final SutHandler controller = new em.external.br.com.codenation.hospital.ExternalEvoMasterController("/home/rhuang329/coaster/EMB/exp2/gestaohospital-sut.jar");
    private static String baseUrlOfSut;

    @BeforeAll
    public static void initClass() {
        controller.setupForGeneratedTest();
        baseUrlOfSut = controller.startSut();
        controller.registerOrExecuteInitSqlCommandsIfNeeded();
        assertNotNull(baseUrlOfSut);
        RestAssured.enableLoggingOfRequestAndResponseIfValidationFails();
        RestAssured.useRelaxedHTTPSValidation();
        RestAssured.urlEncodingEnabled = false;
        RestAssured.config = RestAssured.config()
            .jsonConfig(JsonConfig.jsonConfig().numberReturnType(JsonPathConfig.NumberReturnType.DOUBLE))
            .redirect(redirectConfig().followRedirects(false));
    }

    @AfterAll
    public static void tearDown() {
        controller.stopSut();
    }

    @BeforeEach
    public void initTest() {
        controller.resetStateOfSUT();
    }

    /**
    * Calls:
    * 1 - (400) PUT:/v1/hospitais/{hospital_id}/estoque/{produto_id}
    * 2 - (500) GET:/v1/hospitais/maisProximo
    * 3 - (200) GET:/v1/hospitais/{hospital_id}/pacientes
    * 4 - (400) GET:/v1/hospitais/{hospital_id}/proximidades
    * 5 - (404) GET:/v1/hospitais/{hospital_id}/pacientes/{patientId}
    * 6 - (400) GET:/v1/hospitais/{hospital_id}/hospitaisProximos
    * 7 - (400) PUT:/v1/hospitais/{hospital_id}
    * Found 7 potential faults. Type-codes: 100, 101
    */
    @Test @Timeout(60)
    public void test_66_putOnHospitaiShowsFaults_100_101() throws Exception {
        List<MongoInsertionDto> insertions = mongo().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"_EM_7681_XYZ_\", \"name\":\"N\", \"address\":\"ARQw4IWjaTYLml\", \"beds\":{\"$numberInt\":\"262228\"}, \"availableBeds\":{\"$numberInt\":\"134218663\"}, \"location\":{\"id\":\"kDSYgjGC2g\", \"name\":\"R7L\", \"referenceId\":\"4NMr1JDv2NgcBEA\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.7639466526340252\"}, {\"$numberDouble\":\"0.6145528104066247\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"duy\", \"name\":\"_EM_7682_XYZ_\", \"cpf\":\"\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-350938800000\"}}, \"gender\":\"nowxaCv_\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1654628400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-1159124400000\"}}, \"active\":false, \"location\":{\"id\":\"_EM_7683_XYZ_\", \"name\":\"_EM_3228_XYZ_\", \"referenceId\":\"_EM_6480_XYZ_\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"1960077.9354252447\"}, {\"$numberDouble\":\"1.7507457630110657\"}], \"type\":\"Point\"}}}, {\"id\":\"C8\", \"name\":\"i1YtjBBj572H7\", \"cpf\":\"\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-395524800000\"}}, \"gender\":\"qBWc\", \"entryDate\":{\"$date\":{\"$numberLong\":\"3558484800000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"400132800000\"}}, \"active\":true, \"location\":{\"id\":\"\", \"name\":\"_3Xjvy\", \"referenceId\":\"99wzfySfqabWS\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.15339073154398664\"}, {\"$numberDouble\":\"0.9847426646752048\"}], \"type\":\"Point\"}}}], \"products\":[], \"_id\":{\"$oid\":\"60e00285c6332cfb5073cc9f\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"qso_PvR\", \"name\":\"_EM_7684_XYZ_\", \"address\":\"yuUX\u0087mU\", \"beds\":{\"$numberInt\":\"0\"}, \"availableBeds\":{\"$numberInt\":\"4259840\"}, \"location\":{\"id\":\"PjpeOQotbsc\", \"name\":\"_FUYU13U_XS\\\\W\", \"referenceId\":\"j\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.32471976516159945\"}, {\"$numberDouble\":\"-1657803.0269482713\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"64\", \"name\":\"cosbtJjcE\", \"cpf\":\"Y6E9BYVkyz81n\", \"birthDate\":{\"$date\":{\"$numberLong\":\"969249600000\"}}, \"gender\":\"_EM_3460_XYZ_\", \"entryDate\":{\"$date\":{\"$numberLong\":\"1179115200000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"4102462800000\"}}, \"active\":false, \"location\":{\"id\":\"B7DKFI\", \"name\":\"_EM_3461_XYZ_\", \"referenceId\":\"7BGoh\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.9467887856714625\"}, {\"$numberDouble\":\"0.16074170974138668\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"740\"}, \"machineIdentifier\":{\"$numberInt\":\"343\"}, \"processIdentifier\":{\"$numberInt\":\"-1345\"}, \"counter\":{\"$numberInt\":\"-1\"}}, \"name\":\"_EM_3232_XYZ_\", \"description\":\"_EM_3233_XYZ_\", \"quantity\":{\"$numberInt\":\"497\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"797\"}, \"machineIdentifier\":{\"$numberInt\":\"583\"}, \"processIdentifier\":{\"$numberInt\":\"852\"}, \"counter\":{\"$numberInt\":\"842\"}}, \"name\":\"l\", \"description\":\"w7jRD1bigNz4bA\", \"quantity\":{\"$numberInt\":\"8341\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"222\"}, \"machineIdentifier\":{\"$numberInt\":\"643\"}, \"processIdentifier\":{\"$numberInt\":\"680\"}, \"counter\":{\"$numberInt\":\"-2092180446\"}}, \"name\":\"_EM_2699_XYZ_\", \"description\":\"_EM_3235_XYZ_\", \"quantity\":{\"$numberInt\":\"-65470\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"436\"}, \"machineIdentifier\":{\"$numberInt\":\"200478780\"}, \"processIdentifier\":{\"$numberInt\":\"691\"}, \"counter\":{\"$numberInt\":\"17\"}}, \"name\":\"45jKOjK\", \"description\":\"_EM_4440_XYZ_\", \"quantity\":{\"$numberInt\":\"-67108562\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"fd9066729d3afc0ecf3ded54\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"SkOLKk\", \"name\":\"@xAD^Hj\", \"address\":\"_EM_7733_XYZ_\", \"beds\":{\"$numberInt\":\"-67108096\"}, \"availableBeds\":{\"$numberInt\":\"0\"}, \"location\":{\"id\":\"_EM_3463_XYZ_\", \"name\":\"O9W8fIG_G\", \"referenceId\":\"42\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"-0.5140367055010309\"}, {\"$numberDouble\":\"-51.40670913555295\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"Zn3niiyo\", \"name\":\"x\", \"cpf\":\"T\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2822961600000\"}}, \"gender\":\"KItB9C\", \"entryDate\":{\"$date\":{\"$numberLong\":\"3296174400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2505528000000\"}}, \"active\":true, \"location\":{\"id\":\"_EM_6596_XYZ_\", \"name\":\"Z\", \"referenceId\":\"mw0i55zb_FxlUS\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.11704813168788308\"}, {\"$numberDouble\":\"9847.715884804451\"}], \"type\":\"Point\"}}}, {\"id\":\"_EM_6711_XYZ_\", \"name\":\"_EM_6712_XYZ_\", \"cpf\":\"\", \"birthDate\":{\"$date\":{\"$numberLong\":\"1897016400000\"}}, \"gender\":\"DnJ_yT\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-1972580400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-763412400000\"}}, \"active\":true, \"location\":{\"id\":\"3VKW\", \"name\":\"OQd1Et_o\", \"referenceId\":\"YBtE\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.32742736760231506\"}, {\"$numberDouble\":\"0.18792793427344157\"}], \"type\":\"Point\"}}}, {\"id\":\"_EM_3466_XYZ_\", \"name\":\"_EM_6713_XYZ_\", \"cpf\":\"1W>_KQoZQxJgdyh\", \"birthDate\":{\"$date\":{\"$numberLong\":\"3715646400000\"}}, \"gender\":\"avPGfH5MlHYYV9b\", \"entryDate\":{\"$date\":{\"$numberLong\":\"1157342400000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-1743188400000\"}}, \"active\":false, \"location\":{\"id\":\"ooPrcXqoh\", \"name\":\"_EM_3239_XYZ_\", \"referenceId\":\"_EM_3240_XYZ_\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"84941.0042178334\"}, {\"$numberDouble\":\"1.9314691304012026\"}], \"type\":\"Point\"}}}, {\"id\":\"juX7c0\", \"name\":\"_KZ\", \"cpf\":\"Kox49ojY\", \"birthDate\":{\"$date\":{\"$numberLong\":\"3410312400000\"}}, \"gender\":\"BAkWAI\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-336427200000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2243134800000\"}}, \"active\":true, \"location\":{\"id\":\"CMnt6G\", \"name\":\"uQCNiUXAQIJ4eHd\", \"referenceId\":\"_EM_4441_XYZ_\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.3\"}, {\"$numberDouble\":\"0.3659573637167889\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"0\"}, \"machineIdentifier\":{\"$numberInt\":\"0\"}, \"processIdentifier\":{\"$numberInt\":\"0\"}, \"counter\":{\"$numberInt\":\"438\"}}, \"name\":\"_EM_6482_XYZ_\", \"description\":\"oEm\", \"quantity\":{\"$numberInt\":\"0\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"938\"}, \"machineIdentifier\":{\"$numberInt\":\"527\"}, \"processIdentifier\":{\"$numberInt\":\"560\"}, \"counter\":{\"$numberInt\":\"1866253875\"}}, \"name\":\"DeVpSTyvI1jjG\", \"description\":\"_EM_6798_XYZ_\", \"quantity\":{\"$numberInt\":\"0\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"2ac02a8d4304967badf6298f\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"ExoGX\", \"name\":\"UHI\", \"address\":\"Q]U\", \"beds\":{\"$numberInt\":\"-1024\"}, \"availableBeds\":{\"$numberInt\":\"-33553302\"}, \"location\":{\"id\":\"PdFg0\", \"name\":\"hcGBUGqu4vF\", \"referenceId\":\"28KBOKG_KFkeCo\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"200965.4911567784\"}, {\"$numberDouble\":\"-722631.4000690631\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"_EM_6483_XYZ_\", \"name\":\"\", \"cpf\":\"wFsvQveUUhEhfQ8L\", \"birthDate\":{\"$date\":{\"$numberLong\":\"3176683200000\"}}, \"gender\":\"qYeDiv9mL0\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-422136000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2948155200000\"}}, \"active\":true, \"location\":{\"id\":\"N08S\", \"name\":\"L\", \"referenceId\":\"lUjruxEq5\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.8769261554868669\"}, {\"$numberDouble\":\"0.944364091357\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"-260833788\"}, \"machineIdentifier\":{\"$numberInt\":\"46\"}, \"processIdentifier\":{\"$numberInt\":\"122\"}, \"counter\":{\"$numberInt\":\"858\"}}, \"name\":\"j]UK;U\", \"description\":\"_EM_7689_XYZ_\", \"quantity\":{\"$numberInt\":\"680\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"252\"}, \"machineIdentifier\":{\"$numberInt\":\"421\"}, \"processIdentifier\":{\"$numberInt\":\"511\"}, \"counter\":{\"$numberInt\":\"576\"}}, \"name\":\"K5ZwK\", \"description\":\"naG\", \"quantity\":{\"$numberInt\":\"152\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"33\"}, \"machineIdentifier\":{\"$numberInt\":\"66492\"}, \"processIdentifier\":{\"$numberInt\":\"-977\"}, \"counter\":{\"$numberInt\":\"1000\"}}, \"name\":\"_EM_2700_XYZ_\", \"description\":\"_EM_2701_XYZ_\", \"quantity\":{\"$numberInt\":\"990\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"d7dbead6f04d5a241c4f0512\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"0Bjp1o1lXUzrd\", \"name\":\"^UUqUQTUGUCU10\", \"address\":\"6UjBoavM\", \"beds\":{\"$numberInt\":\"-2048\"}, \"availableBeds\":{\"$numberInt\":\"4718974\"}, \"location\":{\"id\":\"_EM_6714_XYZ_\", \"name\":\"_EM_3467_XYZ_\", \"referenceId\":\"=t2J\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.0\"}, {\"$numberDouble\":\"0.7818\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"XEVUNC\", \"name\":\"hdP3\", \"cpf\":\"_EM_7686_XYZ_\", \"birthDate\":{\"$date\":{\"$numberLong\":\"1977105600000\"}}, \"gender\":\"\", \"entryDate\":{\"$date\":{\"$numberLong\":\"2647659600000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-1336075200000\"}}, \"active\":true, \"location\":{\"id\":\"Pp84ooIjwtj\", \"name\":\"FusiUl3\", \"referenceId\":\"4ZuKDr19JS\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.8520099702637818\"}, {\"$numberDouble\":\"0.9143949897343494\"}], \"type\":\"Point\"}}}, {\"id\":\"CGApl9ItN9JX\", \"name\":\"WYUD6VaYaVDb\", \"cpf\":\"kM_LCpYMe\", \"birthDate\":{\"$date\":{\"$numberLong\":\"2297217600000\"}}, \"gender\":\"_EM_3468_XYZ_\", \"entryDate\":{\"$date\":{\"$numberLong\":\"2501812800000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-219351600000\"}}, \"active\":false, \"location\":{\"id\":\"iLBlVq7ucWfFx\", \"name\":\"?bKYrTqvH3En\", \"referenceId\":\"_EM_3469_XYZ_\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.2121858311611725\"}, {\"$numberDouble\":\"0.24138135013898054\"}], \"type\":\"Point\"}}}, {\"id\":\"_E4iEe\", \"name\":\"3JxFgt2Y\", \"cpf\":\"TA\", \"birthDate\":{\"$date\":{\"$numberLong\":\"-1917025200000\"}}, \"gender\":\"75Aq2RJcz_\", \"entryDate\":{\"$date\":{\"$numberLong\":\"960523200000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"2059272000000\"}}, \"active\":true, \"location\":{\"id\":\"_EM_6598_XYZ_\", \"name\":\"UmoPpUUhUUUf8\", \"referenceId\":\"_EM_3471_XYZ_\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.0\"}, {\"$numberDouble\":\"0.6050565637622861\"}], \"type\":\"Point\"}}}, {\"id\":\"tPiFwa_sRyJcFo4p\", \"name\":\"\", \"cpf\":\"NCtbLG_usyu8b\", \"birthDate\":{\"$date\":{\"$numberLong\":\"3658539600000\"}}, \"gender\":\"0UJ1K\", \"entryDate\":{\"$date\":{\"$numberLong\":\"528609600000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"154155600000\"}}, \"active\":true, \"location\":{\"id\":\"7cvNl_AE\", \"name\":\"o\", \"referenceId\":\"7i\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.5425315561010615\"}, {\"$numberDouble\":\"-0.09342139462660493\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"985\"}, \"machineIdentifier\":{\"$numberInt\":\"902\"}, \"processIdentifier\":{\"$numberInt\":\"683\"}, \"counter\":{\"$numberInt\":\"638\"}}, \"name\":\"n_j3264gt\", \"description\":\"BpHJMNh\", \"quantity\":{\"$numberInt\":\"840\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"131981\"}, \"machineIdentifier\":{\"$numberInt\":\"489\"}, \"processIdentifier\":{\"$numberInt\":\"195\"}, \"counter\":{\"$numberInt\":\"864\"}}, \"name\":\"8w9zo\", \"description\":\"i\", \"quantity\":{\"$numberInt\":\"316\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"786\"}, \"machineIdentifier\":{\"$numberInt\":\"533170\"}, \"processIdentifier\":{\"$numberInt\":\"0\"}, \"counter\":{\"$numberInt\":\"0\"}}, \"name\":\"5_s\", \"description\":\"IG9\", \"quantity\":{\"$numberInt\":\"589\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"-262094\"}, \"machineIdentifier\":{\"$numberInt\":\"824\"}, \"processIdentifier\":{\"$numberInt\":\"112\"}, \"counter\":{\"$numberInt\":\"-2096388\"}}, \"name\":\"oucC8V8Id\", \"description\":\"PtOOh\", \"quantity\":{\"$numberInt\":\"0\"}, \"productType\":\"COMMON\"}], \"_id\":{\"$oid\":\"761200ccd24ef2e8d0589c87\"}}")
            .and().insertInto("HospitalDB", "hospital_collection")
                .d("{\"id\":\"_EM_7690_XYZ_\", \"name\":\"Ho2\", \"address\":\"tU~aN65FJQ\", \"beds\":{\"$numberInt\":\"-7424\"}, \"availableBeds\":{\"$numberInt\":\"50\"}, \"location\":{\"id\":\"cq8UuUUUU\", \"name\":\"BlL4Y0JE61Bx8WB\", \"referenceId\":\"3PU3U\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"-1.322609218975662\"}, {\"$numberDouble\":\"0.27193016293291783\"}], \"type\":\"Point\"}}, \"patients\":[{\"id\":\"FVU3Ia.TBwba1V\", \"name\":\"_EM_7692_XYZ_\", \"cpf\":\"PW3fOHXar\", \"birthDate\":{\"$date\":{\"$numberLong\":\"3261182400000\"}}, \"gender\":\"OkZBHSPFu\", \"entryDate\":{\"$date\":{\"$numberLong\":\"-186433200000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-1243281600000\"}}, \"active\":false, \"location\":{\"id\":\"qhAzrxFql\", \"name\":\"CXWSgTiC\", \"referenceId\":\"rl\", \"locationCategory\":\"PATIENT\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.1785344744327907\"}, {\"$numberDouble\":\"0.07715294249873828\"}], \"type\":\"Point\"}}}], \"products\":[{\"_id\":{\"timestamp\":{\"$numberInt\":\"206\"}, \"machineIdentifier\":{\"$numberInt\":\"303\"}, \"processIdentifier\":{\"$numberInt\":\"858\"}, \"counter\":{\"$numberInt\":\"750\"}}, \"name\":\"OpenxR\", \"description\":\"t9ML7FCC_GYSMOP\", \"quantity\":{\"$numberInt\":\"947\"}, \"productType\":\"COMMON\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"827\"}, \"machineIdentifier\":{\"$numberInt\":\"792\"}, \"processIdentifier\":{\"$numberInt\":\"958\"}, \"counter\":{\"$numberInt\":\"703\"}}, \"name\":\"Nn0uBMcU0GDrBh\", \"description\":\"5DHo7JLEcT4\", \"quantity\":{\"$numberInt\":\"484\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"544\"}, \"machineIdentifier\":{\"$numberInt\":\"377\"}, \"processIdentifier\":{\"$numberInt\":\"716\"}, \"counter\":{\"$numberInt\":\"154\"}}, \"name\":\"EdVrSsJ2_\", \"description\":\"Dsl\", \"quantity\":{\"$numberInt\":\"694\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"853\"}, \"machineIdentifier\":{\"$numberInt\":\"472\"}, \"processIdentifier\":{\"$numberInt\":\"428\"}, \"counter\":{\"$numberInt\":\"677\"}}, \"name\":\"_EM_7726_XYZ_\", \"description\":\"_EM_7727_XYZ_\", \"quantity\":{\"$numberInt\":\"247\"}, \"productType\":\"BLOOD\"}, {\"_id\":{\"timestamp\":{\"$numberInt\":\"479\"}, \"machineIdentifier\":{\"$numberInt\":\"654\"}, \"processIdentifier\":{\"$numberInt\":\"523\"}, \"counter\":{\"$numberInt\":\"847\"}}, \"name\":\"_EM_6600_XYZ_\", \"description\":\"ZX\", \"quantity\":{\"$numberInt\":\"4194913\"}, \"productType\":\"BLOOD\"}], \"_id\":{\"$oid\":\"3fdf1034cbb4decd6e6bea6a\"}}")
            .and().insertInto("HospitalDB", "location_collection")
                .d("{\"id\":\"QUU<\", \"name\":\"_EM_4442_XYZ_\", \"referenceId\":\"44mTLyc\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.0\"}, {\"$numberDouble\":\"-0.6680388464365128\"}], \"type\":\"Point\"}, \"_id\":{\"$oid\":\"ae64effffed41f2a1b080c39\"}}")
            .and().insertInto("HospitalDB", "product_collection")
                .d("{\"name\":\"a_SzURQ7\", \"description\":\"_EM_6800_XYZ_\", \"quantity\":{\"$numberInt\":\"-64648\"}, \"productType\":\"COMMON\", \"_id\":{\"$oid\":\"cf1a61a1439a22fb7956b24b\"}}")
            .and().insertInto("HospitalDB", "patient_collection")
                .d("{\"id\":\"q4N7MCCpI4\", \"name\":\"\", \"cpf\":\"^EU_UU0UUXYZ_\", \"birthDate\":{\"$date\":{\"$numberLong\":\"958449600000\"}}, \"gender\":\"y\", \"entryDate\":{\"$date\":{\"$numberLong\":\"4130802000000\"}}, \"exitDate\":{\"$date\":{\"$numberLong\":\"-36788400000\"}}, \"active\":false, \"location\":{\"id\":\"MT\", \"name\":\"\", \"referenceId\":\"aigGkc9nw2l\", \"locationCategory\":\"HOSPITAL\", \"position\":{\"coordinates\":[{\"$numberDouble\":\"0.9991960562616332\"}, {\"$numberDouble\":\"0.8583476339157643\"}], \"type\":\"Point\"}}, \"_id\":{\"$oid\":\"767bfd7f530f4804143e953e\"}}")
            .dtos();
        MongoInsertionResultsDto insertionsresult = controller.execInsertionsIntoMongoDatabase(insertions);
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/{hospital_id}/estoque/{produto_id}'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .contentType("application/json")
                .body(" { " + 
                    " \"description\": \"_EM_7731_XYZ_\", " + 
                    " \"id\": \"VnkatHfMvoG7cqE\", " + 
                    " \"productName\": \"3wQjg~\", " + 
                    " \"productType\": \"EVOMASTER\", " + 
                    " \"quantity\": -2804 " + 
                    " } ")
                .put(baseUrlOfSut + "/v1/hospitais/AZb5wIJY/estoque/bi")
                .then()
                .statusCode(400)
                .assertThat()
                .contentType("application/json")
                .body("'status'", numberMatches(400.0))
                .body("'error'", containsString("Bad Request"))
                .body("'message'", containsString("JSON parse error: Cannot deserialize value of type `br.com.codenation.hospital.domain.ProductType` from String \"EVOMASTER\": value not one of declared Enum instance names: [BLOOD, COMMON]; nested exception is com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize value of type `br.com.codenation.hospital.domain.ProductType` from String \"EVOMASTER\": value not one of declared Enum instance names: [BLOOD, COMMON]\n at [Source: (ByteArrayInputStream); line: 1, column: 95] (through reference chain: br.com.codenation.hospital.dto.ProductDTO[\"productType\"])"))
                .body("'path'", containsString("/v1/hospitais/AZb5wIJY/estoque/bi"));
        
        // Fault100. HTTP Status 500. br/com/codenation/hospital/services/LocationService_109_findHospitalNearLocationBy.
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 500 not defined for path '/v1/hospitais/maisProximo'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/maisProximo?" + 
                    "lat=-5055.854914160023&" + 
                    "lon=8.988465674311579E307&" + 
                    "raioMaximo=8.988465674311579E307")
                .then()
                .statusCode(500)// br/com/codenation/hospital/services/LocationService_109_findHospitalNearLocationBy
                .assertThat()
                .contentType("application/json")
                .body("'status'", numberMatches(500.0))
                .body("'error'", containsString("Internal Server Error"))
                .body("'path'", containsString("/v1/hospitais/maisProximo"));
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.body.schema.type. [Path '/0/id'] Instance type (null) does not match any allowed primitive type (allowed: ["string"])
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/fd9066729d3afc0ecf3ded54/pacientes")
                .then()
                .statusCode(200)
                .assertThat()
                .contentType("application/json")
                .body("size()", equalTo(1))
                .body("[0].'name'", containsString("cosbtJjcE"))
                .body("[0].'cpf'", containsString("Y6E9BYVkyz81n"))
                .body("[0].'birthDate'", containsString("2000-09-18T04:00:00.000+0000"))
                .body("[0].'gender'", containsString("_EM_3460_XYZ_"))
                .body("[0].'entryDate'", containsString("2007-05-14T04:00:00.000+0000"))
                .body("[0].'exitDate'", containsString("2007-05-14T04:00:00.000+0000"))
                .body("[0].'active'", equalTo(false))
                .body("[0].'location'.'name'", containsString("_EM_3461_XYZ_"))
                .body("[0].'location'.'referenceId'", containsString("7BGoh"))
                .body("[0].'location'.'locationCategory'", containsString("HOSPITAL"))
                .body("[0].'location'.'position'.'x'", numberMatches(0.9467887856714625))
                .body("[0].'location'.'position'.'y'", numberMatches(0.16074170974138668))
                .body("[0].'location'.'position'.'type'", containsString("Point"))
                .body("[0].'location'.'position'.'coordinates'.size()", equalTo(2))
                .body("[0].'location'.'position'.'coordinates'[0]", numberMatches(0.9467887856714625))
                .body("[0].'location'.'position'.'coordinates'[1]", numberMatches(0.16074170974138668))
                .body("[0].'location'.'location'.'x'", numberMatches(0.9467887856714625))
                .body("[0].'location'.'location'.'y'", numberMatches(0.16074170974138668))
                .body("[0].'location'.'location'.'type'", containsString("Point"))
                .body("[0].'location'.'location'.'coordinates'.size()", equalTo(2))
                .body("[0].'location'.'location'.'coordinates'[0]", numberMatches(0.9467887856714625))
                .body("[0].'location'.'location'.'coordinates'[1]", numberMatches(0.16074170974138668));
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/{hospital_id}/proximidades'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/_EM_7734_XYZ_/proximidades")
                .then()
                .statusCode(400)
                .assertThat()
                .body(isEmptyOrNullString());
        
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/_EM_7695_XYZ_/pacientes/7URa_ybX")
                .then()
                .statusCode(404)
                .assertThat()
                .body(isEmptyOrNullString());
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/{hospital_id}/hospitaisProximos'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .get(baseUrlOfSut + "/v1/hospitais/s/hospitaisProximos?raio=2.2471164185778946E307")
                .then()
                .statusCode(400)
                .assertThat()
                .body(isEmptyOrNullString());
        
        // Fault101. Received A Response From API With A Structure/Data That Is Not Matching Its Schema. Type: validation.response.status.unknown. Response status 400 not defined for path '/v1/hospitais/{hospital_id}'.
        given().accept("*/*")
                .header("x-EMextraHeader123", "")
                .contentType("application/json")
                .body(" { " + 
                    " \"address\": \"kiFWnDS\", " + 
                    " \"availableBeds\": 16384, " + 
                    " \"beds\": 4194408, " + 
                    " \"id\": \"159\", " + 
                    " \"latitude\": \"dkh2\", " + 
                    " \"longitude\": \"_EM_7736_XYZ_\", " + 
                    " \"name\": \"_EM_2707_XYZ_\" " + 
                    " } ")
                .put(baseUrlOfSut + "/v1/hospitais/_EM_7735_XYZ_")
                .then()
                .statusCode(400)
                .assertThat()
                .body(isEmptyOrNullString());
    }
}
