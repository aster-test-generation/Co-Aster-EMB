**This is a copy of EvoMaster Benchmark v4.0.0 for evaluating CoAster.**

# Build

First, you need to set necessary environment variables, e.g.,
```
export JAVA_HOME_8=/usr/lib/jvm/java-8-openjdk-amd64/jre/
export JAVA_HOME_11=/usr/lib/jvm/java-11-openjdk-amd64/
export JAVA_HOME_17=/usr/lib/jvm/java-17-openjdk-amd64/
export JAVA_HOME_21=/usr/lib/jvm/java-21-openjdk-amd64/
```

Then, run the script to build the benchmark. This script will skip all tests.
```
python ./scripts/dist.py
```

# Run EvoMaster-Generated Tests and their Split Test Classes

For each application, its EvoMaster-generated test class is placed under the same module of its external EvoMaster driver, usually `<jdk_?_maven>/em/external/rest/<app-name>/test/`.

For example, the test classes for restcountries are under
```
jdk_8_maven/em/external/rest/restcountries/src/test
```

Inside this folder, `single_class` contains the single JUnit 5 class generated by EvoMaster, and `split_classes` contains the split test classes, each of which has only one test method.

***PLEASE NOTE***

The generated test classes (and also split test classes) contain hard-coded paths pointing to SUT jars, e.g., `/home/rhuang329/coaster/EMB/exp2/restcountries-sut.jar`.

Please replace them with correct paths, e.g., `EMB_DIR/jdk_8_maven/cs/rest/original/restcountries/target/restcountries-sut.jar`. 
You may want to use a bash script to achieve this.

## Maven Commands to Run Tests

The general command to run all JUnit tests in Maven is (under the same directory of the pom)
```
mvn test
```

To run a single test class:
```bash
mvn test -Dtest=< test class name >
# e.g.,
mvn test -Dtest=EM_restcountriesdefault_1234_Test
```

To run a single test method:
```bash
mvn test -Dtest=< test class name >#< test method name >
# e.g.,
mvn test -Dtest=EM_restcountriesdefault_1234_Test#test_0_getOnOpenapi_yamlReturnsContent
```

To run all tests in a package:
```bash
mvn test -Dtest=< some package >.**
# e.g.,
mvn test -Dtest=em.emtests.split_classes.**
```

# How to Add New Tests

## EvoMaster Driver Dependent

If your new tests depend on EvoMaster's driver, the easiest way is to add them as the tests for the driver, e.g., under `<jdk_?_maven>/em/external/rest/<app-name>/test/`.

To make them runnable, you need to make sure the following dependency is in the pom.xml of the driver.
```
<dependencies>
    <dependency>
        <groupId>org.evomaster</groupId>
        <artifactId>evomaster-client-java-dependencies</artifactId>
        <version>4.0.0</version>
        <type>pom</type>
        <scope>test</scope>
    </dependency>
</dependencies>
```

## Normal Tests

If your new tests only depend on the SUT itself, the easiest way is to add them to the test suite of the original application, under `<jdk_?_maven>/cs`.